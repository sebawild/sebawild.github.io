<div id="pf3f" class="pf w0 h0" data-page-no="3f"><div class="pc pc3f w0 h0"><div class="t m0 xc h2 y12 ff1 fs0 fc0 sc0 ls0 ws0">4<span class="_ _2e"> </span>Average Case Analysis of Dual-Pivot</div><div class="t m0 xe4 h2 y313 ff1 fs0 fc0 sc0 ls0 ws0">Quicksort:<span class="_ _1b"> </span>Counting Swaps and</div><div class="t m0 xe4 h2 y7c7 ff1 fs0 fc0 sc0 ls0 ws0">Comparisons</div><div class="t m0 xed h11 y7c8 ffc fs7 fc0 sc0 ls0 ws0">“</div><div class="t m4 xe h9 y7c9 ff7 fs4 fc0 sc0 ls0 ws0">People<span class="_ _9"> </span>who<span class="_ _a"> </span>analyze<span class="_ _a"> </span>algorithms<span class="_ _a"> </span>have<span class="_ _9"> </span>double<span class="_ _a"> </span>happiness.<span class="_ _0"> </span>First<span class="_ _a"> </span>of<span class="_ _a"> </span>all<span class="_ _a"> </span>they</div><div class="t m18 x1e5 h9 y7ca ff7 fs4 fc0 sc0 ls0 ws0">experience<span class="_ _9"> </span>the<span class="_ _a"> </span>sheer<span class="_ _9"> </span>beauty<span class="_ _a"> </span>of<span class="_ _a"> </span>elegant<span class="_ _9"> </span>mathematical<span class="_ _a"> </span>patterns<span class="_ _9"> </span>that<span class="_ _a"> </span>sur-</div><div class="t m20 x1e5 h9 y7cb ff7 fs4 fc0 sc0 ls0 ws0">round elegant<span class="_ _a"> </span>computational<span class="_ _9"> </span>procedur<span class="_ _b"></span>es.<span class="_ _0"> </span>Then<span class="_ _a"> </span>they<span class="_ _9"> </span>receive<span class="_ _9"> </span>a<span class="_ _a"> </span>practical</div><div class="t m24 x1e5 h9 y7cc ff7 fs4 fc0 sc0 ls0 ws0">payoff<span class="_ _9"> </span>when<span class="_ _a"> </span>their<span class="_ _a"> </span>theories<span class="_ _9"> </span>make<span class="_ _a"> </span>it<span class="_ _9"> </span>possible<span class="_ _a"> </span>to<span class="_ _9"> </span>get<span class="_ _a"> </span>other<span class="_ _a"> </span>jobs<span class="_ _9"> </span>done<span class="_ _a"> </span>more</div><div class="t m0 x1e5 h9 y7cd ff7 fs4 fc0 sc0 ls0 ws0">quickly<span class="_ _9"> </span>and<span class="_ _a"> </span>more economically<span class="_ _20"></span>.<span class="_ _5b"> </span>—<span class="_ _5"> </span><span class="ff5">D.<span class="_ _5"> </span>E.<span class="_ _a"> </span>K<span class="ff6">nuth<span class="_ _a"> </span></span><span class="fs8">in<span class="_ _1"> </span>the<span class="_ _9"> </span>Fore<span class="_ _b"></span>w<span class="_ _20"></span>ord<span class="_ _1"> </span>of<span class="_ _9"> </span>[SF<span class="ff6">96</span>]</span></span></div><div class="t m0 x94 h11 y7c8 ffc fs7 fc0 sc0 ls0 ws0">”</div><div class="t m0 xc h1a y7ce ff1 fs5 fc0 sc0 ls0 ws0">4.1<span class="_ _15"> </span>Setting for the Analysis</div><div class="t m0 xc h3 y7cf ff1 fs1 fc0 sc0 ls0 ws0">4.1.1<span class="_ _22"> </span>The Algorithms</div><div class="t mc xc hd y7d0 ff5 fs4 fc0 sc0 ls0 ws0">In<span class="_ _a"> </span>this<span class="_ _a"> </span>Chapter<span class="_ _3"></span>,<span class="_ _a"> </span>I<span class="_ _a"> </span>will<span class="_ _a"> </span>analyze<span class="_ _a"> </span>tw<span class="_ _20"></span>o<span class="_ _a"> </span>Quicksort<span class="_ _a"> </span>v<span class="_ _b"></span>ariants<span class="_ _a"> </span>that<span class="_ _a"> </span>partition<span class="_ _a"> </span>the<span class="_ _a"> </span>current</div><div class="t m2 xc hd y7d1 ff5 fs4 fc0 sc0 ls0 ws0">list<span class="_ _a"> </span>into</div><div class="t m0 x90 h10 y7d1 ffa fs4 fc0 sc0 ls0 ws0">s<span class="_ _a"> </span><span class="ffb">=<span class="_ _4"> </span></span>3</div><div class="t m2 x1bf hd y7d1 ff5 fs4 fc0 sc0 ls0 ws0">partitions<span class="_ _a"> </span>around<span class="_ _a"> </span>tw<span class="_ _b"></span>o<span class="_ _a"> </span>piv<span class="_ _20"></span>ots.<span class="_ _8"> </span>S<span class="ff6">edgewick<span class="_ _a"> </span></span>introduces<span class="_ _4"> </span>the<span class="_ _a"> </span>imple-</div><div class="t m2 xc hd y7d2 ff5 fs4 fc0 sc0 ls0 ws0">mentation<span class="_ _4"> </span>giv<span class="_ _3"></span>en<span class="_ _4"> </span>in<span class="_ _4"> </span>Algorithm<span class="_ _a"> </span><span class="ff6">7<span class="_ _4"> </span></span>in<span class="_ _4"> </span>his<span class="_ _4"> </span>PhD<span class="_ _a"> </span>thesis<span class="_ _4"> </span>[</div><div class="t m0 xa7 hd y7d2 ff5 fs4 fc0 sc0 ls0 ws0">S<span class="_ _6"></span>ed<span class="ff6">75</span></div><div class="t m2 x1d hd y7d2 ff5 fs4 fc0 sc0 ls0 ws0">].<span class="_ _8"> </span>T<span class="_ _1a"></span>o<span class="_ _4"> </span>the<span class="_ _4"> </span>kno<span class="_ _20"></span>wledge</div><div class="t m2 xc hd y7d3 ff5 fs4 fc0 sc0 ls0 ws0">of<span class="_ _0"> </span>the<span class="_ _17"> </span>author<span class="_ _1a"></span>,<span class="_ _17"> </span>this<span class="_ _0"> </span>is<span class="_ _0"> </span>the<span class="_ _17"> </span>ﬁrst<span class="_ _0"> </span>implementation<span class="_ _0"> </span>of<span class="_ _17"> </span>a<span class="_ _0"> </span>dual-piv<span class="_ _20"></span>ot<span class="_ _0"> </span>Quicksort<span class="_ _17"> </span>in<span class="_ _0"> </span>a</div><div class="t m27 xc hd y7d4 ff5 fs4 fc0 sc0 ls0 ws0">procedural<span class="_ _a"> </span>language.<span class="_ _0"> </span>S<span class="ff6">edgewick<span class="_ _4"> </span></span>also<span class="_ _a"> </span>giv<span class="_ _20"></span>es<span class="_ _a"> </span>a<span class="_ _a"> </span>precise<span class="_ _a"> </span>a<span class="_ _20"></span>v<span class="_ _20"></span>erage<span class="_ _4"> </span>case<span class="_ _a"> </span>analysis<span class="_ _a"> </span>of<span class="_ _a"> </span>it,</div><div class="t m0 xc hd y7d5 ff5 fs4 fc0 sc0 ls0 ws0">which<span class="_ _a"> </span>I<span class="_ _a"> </span>will<span class="_ _a"> </span>reproduce<span class="_ _9"> </span>here.</div><div class="t m4 x26 hd y7d6 ff5 fs4 fc0 sc0 ls0 ws0">In <span class="ff6">2009</span>,<span class="_ _9"> </span>Y<span class="_ _1a"></span><span class="ff6">arosla<span class="_ _1a"></span>vskiy<span class="_ _9"> </span><span class="ff5">proposed a<span class="_ _9"> </span>new dual-piv<span class="_ _b"></span>ot Quicksort<span class="_ _9"> </span>implementation</span></span></div><div class="t m1d xc hd y7d7 ff5 fs4 fc0 sc0 ls0 ws0">on<span class="_ _a"> </span>the<span class="_ _a"> </span>Ja<span class="_ _20"></span>v<span class="_ _20"></span>a<span class="_ _a"> </span>core<span class="_ _a"> </span>librar<span class="_ _6"></span>y<span class="_ _a"> </span>mailing<span class="_ _a"> </span>list.<span class="_ _0"> </span>The<span class="_ _a"> </span>discussion<span class="_ _a"> </span>is<span class="_ _a"> </span>archiv<span class="_ _20"></span>ed<span class="_ _a"> </span>at<span class="_ _a"> </span>[</div><div class="t m0 x1b1 hd y7d7 ff5 fs4 fc0 sc0 ls0 ws0">Ja<span class="_ _20"></span>v<span class="ff6">09</span></div><div class="t m1d x199 hd y7d7 ff5 fs4 fc0 sc0 ls0 ws0">].<span class="_ _0"> </span>The</div><div class="t m0 xc hd y7d8 ff5 fs4 fc0 sc0 ls0 ws0">original<span class="_ _a"> </span>proposal<span class="_ _9"> </span>was<span class="_ _9"> </span>in<span class="_ _a"> </span>the<span class="_ _a"> </span>for<span class="_ _6"></span>m<span class="_ _a"> </span>of<span class="_ _a"> </span>a<span class="_ _a"> </span>Ja<span class="_ _20"></span>va<span class="_ _9"> </span>program,<span class="_ _a"> </span>which<span class="_ _a"> </span>I<span class="_ _a"> </span>distilled<span class="_ _a"> </span>down<span class="_ _9"> </span>to</div><div class="t m0 xc hd y7d9 ff5 fs4 fc0 sc0 ls0 ws0">Algorithm<span class="_ _a"> </span><span class="ff6">8</span>.</div><div class="t m2 x26 hd y7da ff5 fs4 fc0 sc0 ls0 ws0">The<span class="_ _0"> </span>v<span class="_ _b"></span>ersion<span class="_ _17"> </span>of<span class="_ _0"> </span>Y<span class="_ _1a"></span><span class="ff6">arosla<span class="_ _1a"></span>vskiy<span class="ff5">’s<span class="_ _17"> </span>algorithm<span class="_ _0"> </span>which<span class="_ _17"> </span>w<span class="_ _20"></span>as<span class="_ _17"> </span>ﬁnally<span class="_ _0"> </span>accepted<span class="_ _17"> </span>for</span></span></div><div class="t m1d xc hd y7db ff5 fs4 fc0 sc0 ls0 ws0">the<span class="_ _a"> </span>Oracle’s<span class="_ _9"> </span>Jav<span class="_ _3"></span>a<span class="_ _a"> </span><span class="ff6">7<span class="_ _a"> </span></span>runtime<span class="_ _a"> </span>librar<span class="_ _6"></span>y<span class="_ _9"> </span>incor<span class="_ _6"></span>porates<span class="_ _a"> </span>some<span class="_ _a"> </span>v<span class="_ _20"></span>ariants<span class="_ _a"> </span>that<span class="_ _a"> </span>tur<span class="_ _6"></span>ned<span class="_ _9"> </span>out</div><div class="t m4 xc hd y7dc ff5 fs4 fc0 sc0 ls0 ws0">beneﬁcial<span class="_ _a"> </span>in<span class="_ _a"> </span>perfor<span class="_ _6"></span>mance<span class="_ _a"> </span>tests.<span class="_ _17"> </span>Most<span class="_ _9"> </span>notably<span class="_ _33"></span>,<span class="_ _a"> </span>the<span class="_ _a"> </span>librar<span class="_ _6"></span>y<span class="_ _a"> </span>implementation<span class="_ _a"> </span>selects</div><div class="t m2 xc hd y7dd ff5 fs4 fc0 sc0 ls0 ws0">as<span class="_ _a"> </span>piv<span class="_ _20"></span>ots<span class="_ _a"> </span>the</div><div class="t m0 x172 h23 y7dd ffd fs4 fc0 sc0 ls0 ws0">tertiles of a<span class="_ _9"> </span>sample<span class="_ _9"> </span>of ﬁve<span class="_ _9"> </span>elements</div><div class="t m2 x17b hd y7dd ff5 fs4 fc0 sc0 ls0 ws0">.<span class="_ _17"> </span>Moreo<span class="_ _20"></span>v<span class="_ _20"></span>er<span class="_ _3"></span>,<span class="_ _a"> </span>it<span class="_ _a"> </span>features<span class="_ _a"> </span>special</div><div class="t m10 xc hd y7de ff5 fs4 fc0 sc0 ls0 ws0">treatment<span class="_ _a"> </span>of<span class="_ _a"> </span>duplicate<span class="_ _a"> </span>keys:<span class="_ _0"> </span>Elements<span class="_ _a"> </span>with<span class="_ _a"> </span>keys<span class="_ _9"> </span>equal<span class="_ _a"> </span>to<span class="_ _a"> </span>one<span class="_ _a"> </span>of<span class="_ _a"> </span>the<span class="_ _a"> </span>piv<span class="_ _20"></span>ots<span class="_ _a"> </span>end</div><div class="t m2 xc hd y7df ff5 fs4 fc0 sc0 ls0 ws0">up<span class="_ _4"> </span>in<span class="_ _4"> </span>the<span class="_ _4"> </span>middle<span class="_ _4"> </span>partition.<span class="_ _21"> </span>In<span class="_ _a"> </span>an<span class="_ _4"> </span>additional<span class="_ _4"> </span>scan<span class="_ _4"> </span>o<span class="_ _b"></span>v<span class="_ _20"></span>er<span class="_ _4"> </span>this<span class="_ _4"> </span>middle<span class="_ _4"> </span>part,<span class="_ _4"> </span>such</div><div class="t m0 x3d hb y11 ff6 fs4 fc0 sc0 ls0 ws0">61</div><a class="l" href="#pfca" data-dest-detail='[202,"XYZ",70.866,514.771,null]'><div class="d m1" style="border-style:none;position:absolute;left:824.597330px;bottom:793.887205px;width:24.453000px;height:11.916000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf40" data-dest-detail='[64,"XYZ",70.866,764.85,null]'><div class="d m1" style="border-style:none;position:absolute;left:311.564720px;bottom:528.549782px;width:74.098000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfca" data-dest-detail='[202,"XYZ",70.866,760.775,null]'><div class="d m1" style="border-style:none;position:absolute;left:622.213897px;bottom:529.779464px;width:36.184000px;height:14.296000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc7" data-dest-detail='[199,"XYZ",70.866,374.674,null]'><div class="d m1" style="border-style:none;position:absolute;left:770.390542px;bottom:386.182208px;width:32.583000px;height:13.902000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf41" data-dest-detail='[65,"XYZ",70.866,722.11,null]'><div class="d m1" style="border-style:none;position:absolute;left:116.525780px;bottom:327.515304px;width:72.435000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.679893,0.000000,0.000000,1.679893,0.000000,0.000000]}'></div></div>
