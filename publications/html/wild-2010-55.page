<div id="pf37" class="pf w0 h0" data-page-no="37"><div class="pc pc37 w0 h0"><img class="bi x9 y1ee w4 h6" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV4AAAABCAIAAAAZ5lHbAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAFUlEQVQ4y2P48uULwygYBaNgFKACALw8At2jqz4/AAAAAElFTkSuQmCC"/><div class="t m0 x9 h1 y40 ff1 fs0 fc0 sc0 ls0 ws0">4.<span class="_ _20"> </span>Implementation Design</div><div class="t m0 x9 ha y88 ff3 fs5 fc0 sc0 ls0 ws0">In<span class="_ _5"> </span>this<span class="_ _5"> </span>chapter<span class="_ _2"></span>,<span class="_ _5"> </span>w<span class="_ _2"></span>e<span class="_ _5"> </span>present<span class="_ _5"> </span>the<span class="_ _5"> </span>design<span class="_ _5"> </span>of<span class="_ _5"> </span>our<span class="_ _5"> </span>implementation<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span><span class="ff4">2</span>D-CFG<span class="_ _5"> </span>E<span class="ff4">arley</span>-style</div><div class="t m0 x9 ha y89 ff3 fs5 fc0 sc0 ls0 ws0">parser<span class="_ _2"></span>.<span class="_ _23"> </span>As<span class="_ _13"> </span>mentioned<span class="_ _13"> </span>in<span class="_ _13"> </span>section<span class="_ _13"> </span><span class="ff4">3</span>.<span class="ff4">5</span>,<span class="_ _8"> </span>w<span class="_ _0"></span>e<span class="_ _13"> </span>will<span class="_ _13"> </span>use<span class="_ _13"> </span>an<span class="_ _13"> </span>ordinary<span class="_ _13"> </span>SCFG<span class="_ _13"> </span>E<span class="ff4">arley<span class="_ _13"> </span></span>parser<span class="_ _13"> </span>as<span class="_ _13"> </span>a</div><div class="t m0 x9 h9 y8a ff3 fs5 fc0 sc0 ls0 ws0">subroutine<span class="_ _3"> </span>for<span class="_ _5"> </span>performance<span class="_ _5"> </span>impro<span class="_ _0"></span>v<span class="_ _2"></span>ements.</div><div class="t m0 x13 h9 y8b ff3 fs5 fc0 sc0 ls0 ws0">This leads<span class="_ _3"> </span>to<span class="_ _3"> </span>a<span class="_ _3"> </span>doubling in<span class="_ _3"> </span>the<span class="_ _3"> </span>description<span class="_ _3"> </span>of<span class="_ _3"> </span>many<span class="_ _3"> </span>aspects<span class="_ _9"> </span>—<span class="_ _7"> </span>ev<span class="_ _2"></span>er<span class="_ _6"></span>ything exists<span class="_ _3"> </span>in one-</div><div class="t m0 x9 h9 y8c ff3 fs5 fc0 sc0 ls0 ws0">and<span class="_ _13"> </span>two-dimensional<span class="_ _13"> </span>v<span class="_ _0"></span>ersions.<span class="_ _14"> </span>T<span class="_ _c"></span>o<span class="_ _8"> </span>remedy<span class="_ _8"> </span>this<span class="_ _8"> </span>redundancy<span class="_ _c"></span>,<span class="_ _11"> </span>our<span class="_ _13"> </span>discussion<span class="_ _8"> </span>will<span class="_ _8"> </span>alwa<span class="_ _2"></span>ys</div><div class="t m0 x9 ha y8d ff3 fs5 fc0 sc0 ls0 ws0">consider<span class="_ _5"> </span>the<span class="_ _5"> </span><span class="ff4">2</span>D-CFG<span class="_ _5"> </span>case.<span class="_ _1"> </span>Only<span class="_ _5"> </span>if<span class="_ _5"> </span>simple<span class="_ _5"> </span>deletion<span class="_ _5"> </span>of<span class="_ _5"> </span>indices<span class="_ _3"> </span>for<span class="_ _5"> </span>the<span class="_ _5"> </span>second<span class="_ _5"> </span>dimension<span class="_ _5"> </span>or</div><div class="t m0 x9 h9 y8e ff3 fs5 fc0 sc0 ls0 ws0">similarly<span class="_ _5"> </span>simple modiﬁcations<span class="_ _5"> </span>do<span class="_ _5"> </span>not<span class="_ _3"> </span>sufﬁce,<span class="_ _3"> </span>w<span class="_ _0"></span>e<span class="_ _5"> </span>will<span class="_ _3"> </span>explicitly<span class="_ _5"> </span>address<span class="_ _3"> </span>SCFGs.</div><div class="t m0 x9 h12 yb4e ff1 fs2 fc0 sc0 ls0 ws0">4.1.<span class="_ _23"> </span>Motiv<span class="_ _0"></span>ating observations</div><div class="t m0 x9 h9 yb4f ff3 fs5 fc0 sc0 ls0 ws0">As<span class="_ _5"> </span>w<span class="_ _0"></span>e<span class="_ _5"> </span>ha<span class="_ _0"></span>v<span class="_ _0"></span>e<span class="_ _5"> </span>a<span class="_ _5"> </span>speciﬁc<span class="_ _f"> </span>application<span class="_ _5"> </span>in<span class="_ _5"> </span>mind<span class="_ _f"> </span>for<span class="_ _5"> </span>our<span class="_ _5"> </span>parser<span class="_ _9"> </span>—<span class="_ _7"> </span>namely<span class="_ _5"> </span>the<span class="_ _5"> </span>prediction<span class="_ _5"> </span>of<span class="_ _f"> </span>joint</div><div class="t m0 x9 h9 yaf ff3 fs5 fc0 sc0 ls0 ws0">secondary<span class="_ _5"> </span>structures<span class="_ _9"> </span>—<span class="_ _7"> </span>w<span class="_ _0"></span>e<span class="_ _5"> </span>will<span class="_ _5"> </span>tailor<span class="_ _5"> </span>it<span class="_ _5"> </span>to<span class="_ _5"> </span>gain<span class="_ _5"> </span>advantage<span class="_ _5"> </span>of<span class="_ _5"> </span>some<span class="_ _5"> </span>properties<span class="_ _5"> </span>of<span class="_ _5"> </span>this<span class="_ _5"> </span>task.</div><div class="t m0 x9 h9 yb0 ff3 fs5 fc0 sc0 ls0 ws0">So,<span class="_ _1"> </span>before<span class="_ _5"> </span>we<span class="_ _5"> </span>discuss<span class="_ _f"> </span>our<span class="_ _f"> </span>design<span class="_ _5"> </span>decisions,<span class="_ _1"> </span>here<span class="_ _f"> </span>are<span class="_ _5"> </span>the<span class="_ _f"> </span>obser<span class="_ _6"></span>v<span class="_ _0"></span>ations<span class="_ _f"> </span>underlying<span class="_ _f"> </span>our<span class="_ _f"> </span>de-</div><div class="t m0 x9 h9 yb1 ff3 fs5 fc0 sc0 ls0 ws0">sign.</div><div class="t m0 x13 h9 yb50 ff3 fs5 fc0 sc0 ls0 ws0">When looking<span class="_ _5"> </span>at grammars for<span class="_ _5"> </span>(joint) secondary<span class="_ _3"> </span>structures,<span class="_ _3"> </span>one<span class="_ _5"> </span>notices that most<span class="_ _5"> </span>sub-</div><div class="t m0 x9 h9 yb51 ff3 fs5 fc0 sc0 ls0 ws0">structures<span class="_ _5"> </span>are<span class="_ _3"> </span>possible<span class="_ _5"> </span>in<span class="_ _5"> </span>most<span class="_ _3"> </span>locations<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span>primary<span class="_ _5"> </span>structure<span class="_ _33"> </span>—<span class="_ _7"> </span>when<span class="_ _5"> </span>totally<span class="_ _3"> </span>ignoring</div><div class="t m0 x9 h9 yb52 ff3 fs5 fc0 sc0 ls0 ws0">bases,<span class="_ _13"> </span>only<span class="_ _13"> </span>the<span class="_ _13"> </span>minimum<span class="_ _13"> </span>size<span class="_ _13"> </span>of<span class="_ _13"> </span>hairpins<span class="_ _13"> </span>is<span class="_ _13"> </span>restrictiv<span class="_ _0"></span>e.<span class="_ _23"> </span>This<span class="_ _13"> </span>directly<span class="_ _1"> </span>implies,<span class="_ _8"> </span>that<span class="_ _13"> </span>most</div><div class="t m0 x9 h9 yb53 ff3 fs5 fc0 sc0 ls0 ws0">grammar<span class="_ _5"> </span>rules<span class="_ _f"> </span>can<span class="_ _f"> </span>be<span class="_ _5"> </span>completed<span class="_ _f"> </span>in<span class="_ _5"> </span>almost<span class="_ _f"> </span>all<span class="_ _f"> </span>starting<span class="_ _5"> </span>positions.<span class="_ _a"> </span>W<span class="_ _2"></span>e<span class="_ _5"> </span>call<span class="_ _f"> </span>such<span class="_ _5"> </span>grammars</div><div class="t m0 x9 he yb54 ff1 fs5 fc0 sc0 ls0 ws0">dense gr<span class="_ _0"></span>ammars<span class="ff3">.</span></div><div class="t m0 x13 h8 yb55 ff3 fs5 fc0 sc0 ls0 ws0">For<span class="_ _8"> </span>our<span class="_ _8"> </span>parser<span class="_ _2"></span>,<span class="_ _11"> </span>this<span class="_ _8"> </span>means<span class="_ _8"> </span>that<span class="_ _8"> </span>the<span class="_ _11"> </span>v<span class="_ _0"></span>ast<span class="_ _8"> </span><span class="ff6">majority<span class="_ _13"> </span>of<span class="_ _8"> </span>items<span class="_ _8"> </span></span>is<span class="_ _8"> </span>indeed<span class="_ _8"> </span><span class="ff6">derivable<span class="_ _8"> </span></span>for<span class="_ _8"> </span>any</div><div class="t m0 x9 h9 yb56 ff3 fs5 fc0 sc0 ls0 ws0">input<span class="_ _5"> </span>w<span class="_ _2"></span>ord<span class="_ _3"> </span>pair<span class="_ _2"></span>.<span class="_ _1"> </span>Stated<span class="_ _5"> </span>the<span class="_ _3"> </span>other<span class="_ _5"> </span>w<span class="_ _0"></span>a<span class="_ _0"></span>y<span class="_ _5"> </span>round, we can<span class="_ _5"> </span>exclude<span class="_ _5"> </span>har<span class="_ _0"></span>dly<span class="_ _5"> </span>any<span class="_ _3"> </span>items<span class="_ _5"> </span>up<span class="_ _5"> </span>fr<span class="_ _0"></span>ont.</div><div class="t m0 x35 h1b yb57 ff4 fs6 fc0 sc0 ls0 ws0">38</div><div class="t m0 x9 ha yb58 ff3 fs5 fc0 sc0 ls0 ws0">This<span class="_ _5"> </span>ef<span class="_ _0"></span>fect<span class="_ _5"> </span>is ampliﬁed<span class="_ _5"> </span>further<span class="_ _5"> </span>b<span class="_ _2"></span>y<span class="_ _5"> </span>the<span class="_ _3"> </span>use<span class="_ _5"> </span>of<span class="_ _5"> </span>rule<span class="_ _3"> </span>templates<span class="_ _5"> </span>(see<span class="_ _3"> </span>section<span class="_ _5"> </span><span class="ff4">3</span>.<span class="ff4">1</span>.<span class="ff4">5</span>).</div><div class="t m0 x9 h12 yb59 ff1 fs2 fc0 sc0 ls0 ws0">4.2.<span class="_ _23"> </span>Item or<span class="_ _0"></span>der</div><div class="t m0 x9 he yb5a ff3 fs5 fc0 sc0 ls0 ws0">An<span class="_ _f"> </span>item<span class="_ _1"> </span><span class="ff7">A<span class="_ _1"> </span><span class="ff1">depends<span class="_ _f"> </span></span></span>on<span class="_ _1"> </span>item<span class="_ _1"> </span><span class="ff7">B<span class="_ _f"> </span></span>if<span class="_ _1"> </span>the<span class="_ _1"> </span>calculation<span class="_ _f"> </span>of<span class="_ _1"> </span>the<span class="_ _1"> </span>(forwar<span class="_ _0"></span>d)<span class="_ _1"> </span>v<span class="_ _0"></span>alue<span class="_ _1"> </span>of<span class="_ _f"> </span><span class="ff7">A</span>,<span class="_ _13"> </span><span class="ff7">v<span class="ff9">(</span>A<span class="ff9">)</span></span>,<span class="_ _1"> </span>needs</div><div class="t m0 x9 hb yb5b ff7 fs5 fc0 sc0 ls0 ws0">v<span class="ff9">(</span>B<span class="ff9">)<span class="ff3">.<span class="_ _13"> </span>The<span class="_ _5"> </span>grammars<span class="_ _5"> </span>our<span class="_ _5"> </span>parser<span class="_ _5"> </span>can<span class="_ _5"> </span>handle<span class="_ _3"> </span>will<span class="_ _5"> </span>nev<span class="_ _2"></span>er<span class="_ _5"> </span>yield<span class="_ _5"> </span>loops<span class="_ _5"> </span>in<span class="_ _5"> </span>the<span class="_ _5"> </span>item<span class="_ _5"> </span>dependence</span></span></div><div class="t m0 x9 h9 yb5c ff3 fs5 fc0 sc0 ls0 ws0">relation.<span class="_ _2b"> </span>Therefore<span class="_ _1"> </span>w<span class="_ _0"></span>e<span class="_ _1"> </span>can<span class="_ _1"> </span>ﬁnd<span class="_ _13"> </span>a<span class="_ _1"> </span>total<span class="_ _1"> </span>order<span class="_ _1"> </span><span class="ffb">≺<span class="_ _1"> </span></span>on<span class="_ _1"> </span>the<span class="_ _13"> </span>items,<span class="_ _1"> </span>which<span class="_ _13"> </span>implies<span class="_ _1"> </span>that<span class="_ _1"> </span>w<span class="_ _0"></span>e<span class="_ _1"> </span>can</div><div class="t m0 x9 ha yb5d ff3 fs5 fc0 sc0 ls0 ws0">compute<span class="_ _5"> </span>all item<span class="_ _5"> </span>v<span class="_ _0"></span>alues<span class="_ _5"> </span>in<span class="_ _3"> </span>a<span class="_ _5"> </span>dynamic<span class="_ _3"> </span>programming<span class="_ _5"> </span>scheme<span class="_ _3"> </span>(see<span class="_ _5"> </span>section<span class="_ _5"> </span><span class="ff4">4</span>.<span class="ff4">3</span>).</div><div class="t m0 x13 h8 yb5e ff3 fs5 fc0 sc0 ls0 ws0">Fortunately<span class="_ _c"></span>,<span class="_ _a"> </span>it<span class="_ _11"> </span>tur<span class="_ _6"></span>ns<span class="_ _11"> </span>out<span class="_ _11"> </span>that<span class="_ _11"> </span><span class="ffb">≺<span class="_ _11"> </span></span>does<span class="_ _11"> </span><span class="ff6">not<span class="_ _11"> </span></span>depend<span class="_ _11"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>input<span class="_ _11"> </span>wor<span class="_ _0"></span>ds</div><div class="t m0 xf7 h1a yb5f ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x7f hc yb60 ffa fs6 fc0 sc0 ls0 ws0">u</div><div class="t m0 x158 hc yb61 ffa fs6 fc0 sc0 ls0 ws0">v</div><div class="t m0 xff h1a yb5f ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 xeb h9 yb62 ff3 fs5 fc0 sc0 ls0 ws0">and<span class="_ _11"> </span>can</div><div class="t m0 x9 h9 yb63 ff3 fs5 fc0 sc0 ls0 ws0">therefore<span class="_ _5"> </span>be<span class="_ _f"> </span>deter<span class="_ _6"></span>mined<span class="_ _f"> </span>once<span class="_ _f"> </span>and<span class="_ _f"> </span>for<span class="_ _1"> </span>all!</div><div class="t m0 x89 h1b yb64 ff4 fs6 fc0 sc0 ls0 ws0">39</div><div class="t m0 xc5 h8 yb63 ff3 fs5 fc0 sc0 ls0 ws0">Actually<span class="_ _c"></span>,<span class="_ _f"> </span>once<span class="_ _f"> </span>and<span class="_ _f"> </span>for<span class="_ _1"> </span>all<span class="_ _f"> </span><span class="ff6">for<span class="_ _5"> </span>each<span class="_ _f"> </span>grammar<span class="_ _9"> </span></span>—</div><div class="t m0 x9 h9 yb65 ff3 fs5 fc0 sc0 ls0 ws0">w<span class="_ _2"></span>e<span class="_ _13"> </span>need<span class="_ _1"> </span>to<span class="_ _1"> </span>order<span class="_ _1"> </span>the<span class="_ _1"> </span>rules<span class="_ _9"> </span>—<span class="_ _9"> </span>but<span class="_ _13"> </span>the<span class="_ _1"> </span>process<span class="_ _1"> </span>is<span class="_ _1"> </span>quite<span class="_ _1"> </span>simple<span class="_ _1"> </span>and<span class="_ _1"> </span>although<span class="_ _13"> </span>w<span class="_ _0"></span>e<span class="_ _1"> </span>will<span class="_ _1"> </span>do<span class="_ _1"> </span>it</div><div class="t m0 x9 h9 yb66 ff3 fs5 fc0 sc0 ls0 ws0">manually<span class="_ _5"> </span>her<span class="_ _0"></span>e,<span class="_ _5"> </span>it<span class="_ _3"> </span>may be<span class="_ _5"> </span>automated<span class="_ _5"> </span>easily<span class="_ _c"></span>.</div><div class="t m0 x182 h1c yb67 ff4 fs9 fc0 sc0 ls0 ws0">38</div><div class="t m0 xb1 h1d yb68 ff3 fsa fc0 sc0 ls0 ws0">In<span class="_ _5"> </span><span class="ff7">G</span></div><div class="t m0 x67 h60 yb69 ff3 fs4 fc0 sc0 ls0 ws0">RIP</div><div class="t m0 xcc h1d yb68 ff3 fsa fc0 sc0 ls0 ws0">,<span class="_ _5"> </span>only<span class="_ _f"> </span>the<span class="_ _5"> </span>rules<span class="_ _5"> </span>for<span class="_ _5"> </span><span class="ff7">G</span>,<span class="_ _f"> </span><span class="ff7">H<span class="_ _5"> </span></span>and<span class="_ _5"> </span><span class="ff7">J<span class="_ _5"> </span></span>allow<span class="_ _5"> </span>for<span class="_ _5"> </span>‘up-front<span class="_ _5"> </span>exclusion’:<span class="_ _11"> </span>They<span class="_ _5"> </span>all<span class="_ _5"> </span>produce<span class="_ _5"> </span>an<span class="_ _5"> </span>internal<span class="_ _5"> </span>bond,</div><div class="t m0 x28 h1d yb6a ff3 fsa fc0 sc0 ls0 ws0">hence,<span class="_ _34"> </span>the<span class="_ _e"> </span>endpoints<span class="_ _34"> </span>of<span class="_ _34"> </span>those<span class="_ _34"> </span>must<span class="_ _34"> </span>hav<span class="_ _2"></span>e<span class="_ _34"> </span>distance<span class="_ _34"> </span>of<span class="_ _34"> </span>at<span class="_ _34"> </span>least<span class="_ _34"> </span><span class="ff7">4</span>.</div><div class="t m0 x182 h1c yb6b ff4 fs9 fc0 sc0 ls0 ws0">39</div><div class="t m0 xb1 h1e yb6c ff3 fsa fc0 sc0 ls0 ws0">As<span class="_ _34"> </span>indicated<span class="_ _e"> </span>in<span class="_ _34"> </span>[Goo<span class="ff4">98</span>,<span class="_ _34"> </span>Goo<span class="ff4">99</span>],<span class="_ _34"> </span>this<span class="_ _34"> </span>need<span class="_ _34"> </span>not<span class="_ _34"> </span>be<span class="_ _34"> </span>true<span class="_ _34"> </span>for<span class="_ _34"> </span>ev<span class="_ _0"></span>ery<span class="_ _34"> </span>semiring<span class="_ _34"> </span>parser<span class="_ _34"> </span>and<span class="_ _34"> </span>grammar<span class="_ _2"></span>.</div><div class="t m0 x50 ha y36 ff4 fs5 fc0 sc0 ls0 ws0">55</div><a class="l" href="#pf30" data-dest-detail='[48,"XYZ",79.37,781.755,null]'><div class="d m1" style="border-style:none;position:absolute;left:408.746531px;bottom:1091.119078px;width:15.629000px;height:12.973000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf37" data-dest-detail='[55,"XYZ",88.336,143.595,null]'><div class="d m1" style="border-style:none;position:absolute;left:850.766703px;bottom:607.531632px;width:10.461000px;height:14.563000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf21" data-dest-detail='[33,"XYZ",79.37,305.665,null]'><div class="d m1" style="border-style:none;position:absolute;left:716.114878px;bottom:582.494507px;width:23.810000px;height:12.972000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf3c" data-dest-detail='[60,"XYZ",79.37,781.755,null]'><div class="d m1" style="border-style:none;position:absolute;left:727.091299px;bottom:399.355929px;width:15.629000px;height:12.973000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf37" data-dest-detail='[55,"XYZ",88.336,119.001,null]'><div class="d m1" style="border-style:none;position:absolute;left:472.619424px;bottom:349.281678px;width:10.461000px;height:13.010000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf62" data-dest-detail='[98,"XYZ",79.37,718.611,null]'><div class="d m1" style="border-style:none;position:absolute;left:258.426343px;bottom:174.572803px;width:27.591000px;height:10.238000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf62" data-dest-detail='[98,"XYZ",79.37,666.427,null]'><div class="d m1" style="border-style:none;position:absolute;left:309.577406px;bottom:174.572803px;width:27.592000px;height:10.238000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.679893,0.000000,0.000000,1.679893,0.000000,0.000000]}'></div></div>
