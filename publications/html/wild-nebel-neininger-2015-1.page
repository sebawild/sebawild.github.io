<div id="pf1" class="pf w0 h0" data-page-no="1"><div class="pc pc1 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWYAAAABCAIAAABiwpMXAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAFUlEQVQ4y2P4/fs3wygYBaNgFBAHAFkIAvIzdNLmAAAAAElFTkSuQmCC"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">A<span class="_ _0"></span>verage<span class="_ _1"> </span>Case<span class="_ _1"> </span>and<span class="_ _1"> </span>Distrib<span class="_ _2"></span>utional<span class="_ _1"> </span>Anal<span class="_ _2"></span>ysis<span class="_ _1"> </span>of</div><div class="t m0 x2 h2 y2 ff1 fs0 fc0 sc0 ls0 ws0">Dual-Piv<span class="_ _0"></span>ot<span class="_ _1"> </span>Quicksort</div><div class="t m0 x3 h3 y3 ff2 fs1 fc0 sc0 ls0 ws0">Sebastian W<span class="_ _2"></span>ild</div><div class="t m0 x4 h4 y4 ff3 fs2 fc0 sc0 ls0 ws0">∗</div><div class="t m0 x5 h3 y3 ff2 fs1 fc0 sc0 ls0 ws0">Markus E. Nebel</div><div class="t m0 x6 h5 y4 ff3 fs2 fc0 sc0 ls0 ws0">∗<span class="_ _2"></span><span class="ff2 fs3">,<span class="_ _3"></span><span class="fs2">†</span></span></div><div class="t m0 x7 h3 y3 ff2 fs1 fc0 sc0 ls0 ws0">Ralph Neininger</div><div class="t m0 x8 h5 y4 ff2 fs2 fc0 sc0 ls0 ws0">‡</div><div class="t m0 x9 h6 y5 ff2 fs4 fc0 sc0 ls0 ws0">F<span class="_ _2"></span>ebruary 13, 2015</div><div class="t m1 xa h7 y6 ff2 fs5 fc0 sc0 ls0 ws0">In<span class="_ _4"> </span>2009,<span class="_ _4"> </span>Oracle<span class="_ _4"> </span>replaced<span class="_ _4"> </span>the<span class="_ _4"> </span>long-serving<span class="_ _4"> </span>sorting<span class="_ _4"> </span>algorithm<span class="_ _4"> </span>in<span class="_ _4"> </span>its<span class="_ _4"> </span>Ja<span class="_ _2"></span>va<span class="_ _4"> </span>7<span class="_ _4"> </span>runtime</div><div class="t m2 x3 h7 y7 ff2 fs5 fc0 sc0 ls0 ws0">library<span class="_ _5"> </span>by<span class="_ _5"> </span>a<span class="_ _5"> </span>new<span class="_ _5"> </span>dual-pivot<span class="_ _5"> </span>Quicksort<span class="_ _5"> </span>variant<span class="_ _5"> </span>due<span class="_ _5"> </span>to<span class="_ _5"> </span>Vladimir<span class="_ _5"> </span>Y<span class="_ _6"></span>aroslavskiy<span class="_ _7"></span>.<span class="_ _4"> </span>The decision</div><div class="t m1 x3 h7 y8 ff2 fs5 fc0 sc0 ls0 ws0">was<span class="_ _8"> </span>based<span class="_ _8"> </span>on<span class="_ _9"> </span>the<span class="_ _8"> </span>strikingly<span class="_ _9"> </span>good<span class="_ _8"> </span>performance<span class="_ _9"> </span>of<span class="_ _8"> </span>Y<span class="_ _0"></span>aroslavskiy’<span class="_ _2"></span>s<span class="_ _9"> </span>implementation<span class="_ _8"> </span>in</div><div class="t m2 x3 h7 y9 ff2 fs5 fc0 sc0 ls0 ws0">running time experiments.<span class="_ _4"> </span>At that time, no precise investigations of the algorithm were</div><div class="t m1 x3 h7 ya ff2 fs5 fc0 sc0 ls0 ws0">available to explain its superior performance<span class="_ _a"> </span>—<span class="_ _a"> </span>on the contrary:<span class="_ _4"> </span>Previous<span class="_ _b"> </span>theoretical</div><div class="t m1 x3 h7 yb ff2 fs5 fc0 sc0 ls0 ws0">studies of other dual-pivot<span class="_ _5"> </span>Quicksort variants even discouraged<span class="_ _5"> </span>the use of two<span class="_ _5"> </span>pivots.</div><div class="t m3 x3 h7 yc ff2 fs5 fc0 sc0 ls0 ws0">Only in 2012, two of the authors ga<span class="_ _2"></span>ve an average case analysis of a simpliﬁed version</div><div class="t m1 x3 h7 yd ff2 fs5 fc0 sc0 ls0 ws0">of<span class="_ _4"> </span>Y<span class="_ _6"></span>aroslavskiy’s<span class="_ _4"> </span>algorithm,<span class="_ _8"> </span>proving<span class="_ _b"> </span>that<span class="_ _8"> </span>sa<span class="_ _2"></span>vings<span class="_ _4"> </span>in<span class="_ _8"> </span>the<span class="_ _b"> </span>number<span class="_ _8"> </span>of<span class="_ _b"> </span>comparisons<span class="_ _8"> </span>are</div><div class="t m1 x3 h7 ye ff2 fs5 fc0 sc0 ls0 ws0">possible.<span class="_ _c"> </span>However<span class="_ _6"></span>,<span class="_ _9"> </span>Y<span class="_ _0"></span>aroslavskiy’<span class="_ _2"></span>s<span class="_ _9"> </span>algorithm<span class="_ _8"> </span>needs<span class="_ _8"> </span>more<span class="_ _9"> </span>swaps<span class="_ _2"></span>,<span class="_ _9"> </span>which<span class="_ _8"> </span>renders<span class="_ _8"> </span>the</div><div class="t m0 x3 h7 yf ff2 fs5 fc0 sc0 ls0 ws0">analysis inconclusive.</div><div class="t m4 xa h7 y10 ff2 fs5 fc0 sc0 ls0 ws0">T<span class="_ _2"></span>o force the issue<span class="_ _2"></span>, we herein extend our analysis to the fully detailed style of Knuth:</div><div class="t m5 x3 h7 y11 ff2 fs5 fc0 sc0 ls0 ws0">W<span class="_ _0"></span>e determine the exact number of executed Ja<span class="_ _2"></span>va Bytecode instructions.<span class="_ _b"> </span>Surprisingly<span class="_ _6"></span>,</div><div class="t m6 x3 h7 y12 ff2 fs5 fc0 sc0 ls0 ws0">Y<span class="_ _6"></span>aroslavskiy’s algorithm needs sightly <span class="ff4">more </span>Bytecode instructions than a simple imple-</div><div class="t m7 x3 h7 y13 ff2 fs5 fc0 sc0 ls0 ws0">mentation of classic Quicksort<span class="_ _a"> </span>—<span class="_ _a"> </span>contradicting<span class="_ _b"> </span>observed running times.<span class="_ _4"> </span>Like in Oracle’s</div><div class="t m8 x3 h7 y14 ff2 fs5 fc0 sc0 ls0 ws0">library implementation we incorporate the<span class="_ _5"> </span>use of Insertionsort on small subproblems</div><div class="t m9 x3 h7 y15 ff2 fs5 fc0 sc0 ls0 ws0">and show that it indeed speeds up Y<span class="_ _7"></span>aroslavskiy’s Quicksort in terms<span class="_ _5"> </span>of Bytecodes; but</div><div class="t m1 x3 h7 y16 ff2 fs5 fc0 sc0 ls0 ws0">even with<span class="_ _b"> </span>optimal Insertionsort<span class="_ _b"> </span>thresholds the<span class="_ _b"> </span>new Quicksort variant<span class="_ _b"> </span>needs slightly</div><div class="t m0 x3 h7 y17 ff2 fs5 fc0 sc0 ls0 ws0">more Bytecode instructions on average<span class="_ _2"></span>.</div><div class="t m1 xa h7 y18 ff2 fs5 fc0 sc0 ls0 ws0">Finally<span class="_ _7"></span>,<span class="_ _8"> </span>we<span class="_ _8"> </span>show<span class="_ _8"> </span>that<span class="_ _8"> </span>the<span class="_ _8"> </span>(suitably<span class="_ _8"> </span>normalized)<span class="_ _8"> </span>costs<span class="_ _4"> </span>of<span class="_ _8"> </span>Y<span class="_ _0"></span>aroslavskiy’<span class="_ _2"></span>s<span class="_ _8"> </span>algorithm</div><div class="t m1 x3 h7 y19 ff2 fs5 fc0 sc0 ls0 ws0">converge<span class="_ _8"> </span>to<span class="_ _8"> </span>a<span class="_ _8"> </span>random<span class="_ _8"> </span>variable<span class="_ _8"> </span>whose<span class="_ _8"> </span>distribution<span class="_ _8"> </span>is<span class="_ _8"> </span>characterized<span class="_ _8"> </span>by<span class="_ _8"> </span>a<span class="_ _8"> </span>ﬁxed-point</div><div class="t ma x3 h7 y1a ff2 fs5 fc0 sc0 ls0 ws0">equation.<span class="_ _4"> </span>From that, we compute variances of<span class="_ _b"> </span>costs and show that for large</div><div class="t m0 xb h8 y1a ff4 fs6 fc0 sc0 ls0 ws0">n</div><div class="t ma xc h7 y1a ff2 fs5 fc0 sc0 ls0 ws0">, costs are</div><div class="t m0 x3 h7 y1b ff2 fs5 fc0 sc0 ls0 ws0">concentrated around their mean.</div><div class="t m0 x0 h9 y1c ff1 fs1 fc0 sc0 ls0 ws0">1.<span class="_ _d"> </span>Intr<span class="_ _2"></span>oduction</div><div class="t m9 x0 h7 y1d ff2 fs5 fc0 sc0 ls0 ws0">Quicksort is a divide and conquer sorting algorithm originally proposed by Hoare [1961a; 1961b].</div><div class="t m1 x0 h7 y1e ff2 fs5 fc0 sc0 ls0 ws0">The procedure starts by selecting an arbitrary element from the list to be sorted as <span class="ff4">pivot</span>.<span class="_ _8"> </span>Then,</div><div class="t mb x0 h7 y1f ff2 fs5 fc0 sc0 ls0 ws0">Quicksort <span class="ff4">partitions </span>the elements into<span class="_ _5"> </span>two groups:<span class="_ _4"> </span>those smaller than the pivot and those larger</div><div class="t m3 x0 h7 y20 ff2 fs5 fc0 sc0 ls0 ws0">than the pivot.<span class="_ _4"> </span>After partitioning<span class="_ _2"></span>, we know the exact <span class="ff4">rank </span>of the pivot element in<span class="_ _5"> </span>the sorted list,</div><div class="t m1 x0 h7 y21 ff2 fs5 fc0 sc0 ls0 ws0">so we can put<span class="_ _b"> </span>it at its<span class="_ _b"> </span>ﬁnal landing position<span class="_ _b"> </span>between the groups<span class="_ _b"> </span>of smaller and<span class="_ _b"> </span>larger elements.</div><div class="t mc x0 h7 y22 ff2 fs5 fc0 sc0 ls0 ws0">Afterwards<span class="_ _2"></span>, Quicksort proceeds by recursively sorting the two parts, until it reaches lists of length</div><div class="t m0 x0 h7 y23 ff2 fs5 fc0 sc0 ls0 ws0">zero or one, which are already sorted by deﬁnition.</div><div class="t md xd h7 y24 ff2 fs5 fc0 sc0 ls0 ws0">W<span class="_ _0"></span>e will<span class="_ _b"> </span>in the following always assume random access to the data, i.<span class="_ _a"> </span>e., the elements are given</div><div class="t me x0 h7 y25 ff2 fs5 fc0 sc0 ls0 ws0">as entries of an <span class="ff4">array</span>.<span class="_ _4"> </span>Then, the partitioning process can work <span class="ff4">in place </span>by directly manipulating</div><div class="t m0 xe ha y26 ff3 fs7 fc0 sc0 ls0 ws0">∗</div><div class="t m0 xf hb y27 ff2 fs8 fc0 sc0 ls0 ws0">Computer Science Department, University of Kaiserslautern</div><div class="t m0 x10 hc y28 ff2 fs7 fc0 sc0 ls0 ws0">†</div><div class="t m0 xf hb y29 ff2 fs8 fc0 sc0 ls0 ws0">Department of Mathematics and Computer Science, University of Southern Denmark</div><div class="t m0 x10 hc y2a ff2 fs7 fc0 sc0 ls0 ws0">‡</div><div class="t m0 xf hb y2b ff2 fs8 fc0 sc0 ls0 ws0">Institute for Mathematics, J<span class="_ _0"></span>.<span class="_ _a"> </span>W<span class="_ _7"></span>. Goethe University</div><div class="t m0 x11 h7 y2c ff2 fs5 fc0 sc0 ls0 ws0">1</div><a class="l" href="#pf28" data-dest-detail='[40,"XYZ",49.503,444.958,null]'><div class="d mf" style="border-style:none;position:absolute;left:763.459303px;bottom:462.923081px;width:29.827000px;height:11.342000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf28" data-dest-detail='[40,"XYZ",49.503,413.277,null]'><div class="d mf" style="border-style:none;position:absolute;left:819.554291px;bottom:462.923081px;width:29.827000px;height:11.342000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.679893,0.000000,0.000000,1.679893,0.000000,0.000000]}'></div></div>
