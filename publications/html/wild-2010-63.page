<div id="pf3f" class="pf w0 h0" data-page-no="3f"><div class="pc pc3f w0 h0"><img class="bi x9 y9 w1 h6" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2oAAAABCAIAAAAgkspYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAHElEQVRIx+3BgQAAAAwEoffnPYApDKBaNQAA+DlSXgLd2OBTiQAAAABJRU5ErkJggg=="/><div class="t m0 x9 h10 ya ff5 fs4 fc0 sc0 ls0 ws0">Sebastian Wild<span class="_ _82"> </span><span class="fs5">4.7.<span class="_ _d"> </span>Late it<span class="_ _0"></span>em value com<span class="_ _0"></span>putation</span></div><div class="t m0 x109 hb yd1e ff6 fs5 fc0 sc0 ls0 ws0">jump<span class="ff9">(<span class="ff7">p<span class="ff3">,<span class="_ _9"> </span></span>q</span></span></div><div class="t m0 x100 h60 yd1f ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x169 hb yd1e ff9 fs5 fc0 sc0 ls0 ws0">)</div><div class="t m0 x4c hb yd20 ff9 fs5 fc0 sc0 ls0 ws0">:</div><div class="t m0 x190 hb yd1e ff9 fs5 fc0 sc0 ls0 ws0">=</div><div class="t m0 xc h1a yd21 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x8d hb yd22 ff7 fs5 fc0 sc0 ls0 ws0">h<span class="ff9">(</span>γ</div><div class="t m0 x15b hc yd23 ffa fs6 fc0 sc0 ls0 ws0">1</div><div class="t m0 x14 h9 yd22 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _9"> </span><span class="ff7">q</span></div><div class="t m0 x68 h60 yd24 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x17 hb yd22 ff9 fs5 fc0 sc0 ls0 ws0">)<span class="_ _a"> </span>−<span class="_ _a"> </span><span class="ff7">h</span>(<span class="ff7">γ</span></div><div class="t m0 xf1 hc yd23 ffa fs6 fc0 sc0 ls0 ws0">1</div><div class="t m0 x1b2 h9 yd22 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _9"> </span><span class="ff7">q</span></div><div class="t m0 x1de h60 yd24 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x9d hb yd22 ff9 fs5 fc0 sc0 ls0 ws0">−<span class="_ _7"> </span><span class="ff7">1</span>)<span class="_ _a"> </span>−<span class="_ _a"> </span><span class="ff7">1</span></div><div class="t m0 x8d hb yd25 ff7 fs5 fc0 sc0 ls0 ws0">h<span class="ff9">(</span>γ</div><div class="t m0 x15b hc yd26 ffa fs6 fc0 sc0 ls0 ws0">2</div><div class="t m0 x14 h9 yd25 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _9"> </span><span class="ff7">q</span></div><div class="t m0 x68 h60 yd27 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x17 hb yd25 ff9 fs5 fc0 sc0 ls0 ws0">)<span class="_ _a"> </span>−<span class="_ _a"> </span><span class="ff7">h</span>(<span class="ff7">γ</span></div><div class="t m0 xf1 hc yd26 ffa fs6 fc0 sc0 ls0 ws0">2</div><div class="t m0 x1b2 h9 yd25 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _9"> </span><span class="ff7">q</span></div><div class="t m0 x1de h60 yd27 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x9d hb yd25 ff9 fs5 fc0 sc0 ls0 ws0">−<span class="_ _7"> </span><span class="ff7">1</span>)<span class="_ _a"> </span>−<span class="_ _a"> </span><span class="ff7">1</span></div><div class="t m0 x16a h1a yd21 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x53 h9 yd1e ff3 fs5 fc0 sc0 ls0 ws0">,</div><div class="t m0 x2f hb yd28 ff3 fs5 fc0 sc0 ls0 ws0">with<span class="_ _2e"> </span><span class="ff7">h<span class="ff9">(</span>w</span>,<span class="_ _9"> </span><span class="ff7">q<span class="ff9">)</span></span></div><div class="t m0 x4c hb yd29 ff9 fs5 fc0 sc0 ls0 ws0">:</div><div class="t m0 x190 hb yd28 ff9 fs5 fc0 sc0 ls0 ws0">=</div><div class="t m0 xc h14 yd2a fff fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x8d h9 yd2b ff3 fs5 fc0 sc0 ls0 ws0">max</div><div class="t m0 xfc h14 y468 fff fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x86 h10 yd2b ff7 fs5 fc0 sc0 ls0 ws0">i<span class="_ _3"> </span><span class="ff9">:<span class="_ _5"> </span><span class="ff3">#<span class="ff5">NT</span></span>(</span>w</div><div class="t m0 x1aa h18 yd2c ffa fs6 fc0 sc0 ls0 ws0">1<span class="ff3">,</span>i</div><div class="t m0 x5c hb yd2b ff9 fs5 fc0 sc0 ls0 ws0">)<span class="_ _3"> </span>=<span class="_ _5"> </span><span class="ff7">q</span></div><div class="t m0 x26 h14 y468 fff fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 xfd h9 yd2b ff3 fs5 fc0 sc0 ls0 ws0">if<span class="_ _5"> </span><span class="ff7">q<span class="_ _34"> </span><span class="ffd">&gt;<span class="_ _5"> </span></span>0</span></div><div class="t m0 x8d h9 yd2d ff7 fs5 fc0 sc0 ls0 ws0">1<span class="_ _83"> </span><span class="ff3">if<span class="_ _5"> </span></span>q<span class="_ _34"> </span>&lt;<span class="_ _5"> </span>0</div><div class="t m0 x53 h9 yd28 ff3 fs5 fc0 sc0 ls0 ws0">.</div><div class="t m0 x9 h9 yd2e ff3 fs5 fc0 sc0 ls0 ws0">The<span class="_ _1"> </span>helper<span class="_ _13"> </span>function<span class="_ _13"> </span><span class="ff7">h<span class="_ _1"> </span></span>converts<span class="_ _f"> </span>NT<span class="_ _13"> </span>dot<span class="_ _13"> </span>indices<span class="_ _1"> </span>to<span class="_ _13"> </span>nor<span class="_ _6"></span>mal<span class="_ _1"> </span>dot<span class="_ _13"> </span>indices,<span class="_ _13"> </span>the<span class="_ _13"> </span>difference<span class="_ _1"> </span>be-</div><div class="t m0 x9 h9 yd2f ff3 fs5 fc0 sc0 ls0 ws0">tw<span class="_ _2"></span>een<span class="_ _5"> </span>tw<span class="_ _0"></span>o<span class="_ _5"> </span>adjacent values<span class="_ _3"> </span>giv<span class="_ _0"></span>es<span class="_ _5"> </span>the<span class="_ _3"> </span>number<span class="_ _5"> </span>of<span class="_ _3"> </span>ter<span class="_ _6"></span>minals<span class="_ _5"> </span>in<span class="_ _3"> </span>betw<span class="_ _0"></span>een.</div><div class="t m0 x13 h9 yd30 ff3 fs5 fc0 sc0 ls0 ws0">Finally<span class="_ _c"></span>,<span class="_ _f"> </span>whenev<span class="_ _0"></span>er<span class="_ _f"> </span>w<span class="_ _0"></span>e<span class="_ _f"> </span>‘create’<span class="_ _f"> </span>a<span class="_ _1"> </span>new<span class="_ _f"> </span>item<span class="_ _f"> </span><span class="ff7">I</span></div><div class="t m0 x196 hb yd31 ff9 fs5 fc0 sc0 ls0 ws0">:</div><div class="t m0 xc7 hb yd30 ff9 fs5 fc0 sc0 ls0 ws0">=</div><div class="t m0 xde h1a yd32 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x57 hc yd33 ffa fs6 fc0 sc0 ls0 ws0">i</div><div class="t m0 x102 hc yd34 ffa fs6 fc0 sc0 ls0 ws0">k</div><div class="t m0 x1a3 hc yd33 ffa fs6 fc0 sc0 ls0 ws0">j</div><div class="t m0 x60 hc yd34 ffa fs6 fc0 sc0 ls0 ws0">l</div><div class="t m0 x175 h9 yd30 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _f"> </span><span class="ff7">p<span class="_ _9"> </span></span>,<span class="_ _9"> </span><span class="ff7">q</span></div><div class="t m0 x54 h60 yd35 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x32 h1a yd32 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 xfe h9 yd30 ff3 fs5 fc0 sc0 ls0 ws0">—<span class="_ _9"> </span>via<span class="_ _f"> </span>prediction<span class="_ _f"> </span>or<span class="_ _1"> </span>com-</div><div class="t m0 x9 h8 yd36 ff3 fs5 fc0 sc0 ls0 ws0">pletion<span class="_ _9"> </span>—<span class="_ _9"> </span>w<span class="_ _0"></span>e<span class="_ _5"> </span>ha<span class="_ _0"></span>v<span class="_ _0"></span>e<span class="_ _5"> </span>to<span class="_ _5"> </span>add<span class="_ _5"> </span>the<span class="_ _3"> </span><span class="ff6">jump<span class="_ _5"> </span></span>offset<span class="_ _5"> </span>to<span class="_ _5"> </span>the<span class="_ _5"> </span>end<span class="_ _3"> </span>indices.<span class="_ _8"> </span>S<span class="_ _6"></span>o<span class="_ _5"> </span>w<span class="_ _2"></span>e<span class="_ _5"> </span>store<span class="_ _5"> </span>the<span class="_ _5"> </span>v<span class="_ _0"></span>alue<span class="_ _5"> </span>for<span class="_ _5"> </span><span class="ff7">I<span class="_ _33"> </span></span>—</div><div class="t m0 x9 h9 yd37 ff3 fs5 fc0 sc0 ls0 ws0">the<span class="_ _a"> </span>one<span class="_ _a"> </span>w<span class="_ _2"></span>e<span class="_ _a"> </span>hav<span class="_ _2"></span>e<span class="_ _a"> </span>just<span class="_ _a"> </span>computed<span class="_ _9"> </span>—<span class="_ _9"> </span>at<span class="_ _a"> </span><span class="ff17">V</span></div><div class="t m0 x1b7 hb yd38 ff9 fs5 fc0 sc0 ls0 ws0">[</div><div class="t m0 xd5 hd yd37 ff7 fs5 fc0 sc0 ls0 ws0">j</div><div class="t m0 x18f h17 yd39 ff10 fs6 fc0 sc0 ls0 ws0">0</div><div class="t m0 x14 h9 yd37 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _9"> </span><span class="ff7">l</span></div><div class="t m0 xc5 h17 yd39 ff10 fs6 fc0 sc0 ls0 ws0">0</div><div class="t m0 xac h9 yd37 ff3 fs5 fc0 sc0 ls0 ws0">,<span class="_ _9"> </span><span class="ff7">i</span>,<span class="_ _9"> </span><span class="ff7">k</span>,<span class="_ _9"> </span><span class="ff7">p</span>,<span class="_ _7"> </span><span class="ff7">q</span></div><div class="t m0 x170 h60 yd39 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 x5b hb yd38 ff9 fs5 fc0 sc0 ls0 ws0">]</div><div class="t m0 x14d h9 yd37 ff3 fs5 fc0 sc0 ls0 ws0">instead<span class="_ _a"> </span>of<span class="_ _a"> </span><span class="ff17">V</span></div><div class="t m0 x1a8 hb yd38 ff9 fs5 fc0 sc0 ls0 ws0">[</div><div class="t m0 x52 h9 yd37 ff7 fs5 fc0 sc0 ls0 ws0">j<span class="ff3">,<span class="_ _9"> </span></span>l<span class="ff3">,<span class="_ _9"> </span></span>i<span class="ff3">,<span class="_ _9"> </span></span>k<span class="ff3">,<span class="_ _7"> </span></span>p<span class="ff3">,<span class="_ _9"> </span></span>q</div><div class="t m0 xca h60 yd39 ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 xbb hb yd38 ff9 fs5 fc0 sc0 ls0 ws0">]</div><div class="t m0 x16c h9 yd37 ff3 fs5 fc0 sc0 ls0 ws0">with</div><div class="t m0 x9 hd yd3a ff7 fs5 fc0 sc0 ls0 ws0">j</div><div class="t m0 x36 h17 yd3b ff10 fs6 fc0 sc0 ls0 ws0">0</div><div class="t m0 x1a9 hb yd3a ff9 fs5 fc0 sc0 ls0 ws0">=<span class="_ _3"> </span><span class="ff7">j<span class="_ _7"> </span></span>+<span class="_ _e"> </span><span class="ff6">jump</span></div><div class="t m0 x10d hc yd3c ffa fs6 fc0 sc0 ls0 ws0">1</div><div class="t m0 x1d hb yd3a ff9 fs5 fc0 sc0 ls0 ws0">(<span class="ff7">p<span class="ff3">,<span class="_ _9"> </span></span>q</span></div><div class="t m0 xbe h60 yd3b ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 xbd hb yd3a ff9 fs5 fc0 sc0 ls0 ws0">)<span class="_ _5"> </span><span class="ff3">and <span class="ff7">l</span></span></div><div class="t m0 x90 h17 yd3b ff10 fs6 fc0 sc0 ls0 ws0">0</div><div class="t m0 x1c3 hb yd3a ff9 fs5 fc0 sc0 ls0 ws0">=<span class="_ _3"> </span><span class="ff7">l<span class="_ _7"> </span></span>+<span class="_ _e"> </span><span class="ff6">jump</span></div><div class="t m0 xa9 hc yd3c ffa fs6 fc0 sc0 ls0 ws0">2</div><div class="t m0 x8f hb yd3a ff9 fs5 fc0 sc0 ls0 ws0">(<span class="ff7">p<span class="ff3">,<span class="_ _9"> </span></span>q</span></div><div class="t m0 x87 h60 yd3b ff3 fs4 fc0 sc0 ls0 ws0">NT</div><div class="t m0 xfa hb yd3a ff9 fs5 fc0 sc0 ls0 ws0">)<span class="ff3">.</span></div><div class="t m0 x13 h9 yd3d ff3 fs5 fc0 sc0 ls0 ws0">Ho<span class="_ _0"></span>w<span class="_ _0"></span>ev<span class="_ _2"></span>er<span class="_ _2"></span>,<span class="_ _13"> </span>w<span class="_ _0"></span>e<span class="_ _1"> </span>know<span class="_ _f"> </span>that<span class="_ _1"> </span>ter<span class="_ _6"></span>minals<span class="_ _1"> </span>occur<span class="_ _1"> </span>only<span class="_ _13"> </span>at<span class="_ _1"> </span>the<span class="_ _1"> </span>left<span class="_ _13"> </span>and<span class="_ _1"> </span>right<span class="_ _1"> </span>end<span class="_ _1"> </span>of<span class="_ _13"> </span>right<span class="_ _1"> </span>hand</div><div class="t m0 x9 hb yd3e ff3 fs5 fc0 sc0 ls0 ws0">sides.<span class="_ _1b"> </span>Therefore<span class="_ _8"> </span><span class="ff6">jump<span class="ff9">(<span class="ff7">p</span></span></span>,<span class="_ _7"> </span><span class="ff7">q<span class="ff9">)<span class="_ _11"> </span></span></span>is<span class="_ _11"> </span>zero<span class="_ _8"> </span>for<span class="_ _11"> </span>all<span class="_ _11"> </span><span class="ff7">0<span class="_ _d"> </span>&lt;<span class="_ _d"> </span>q<span class="_ _d"> </span>&lt;<span class="_ _d"> </span>`<span class="ff9">(</span>p<span class="ff9">)</span></span>.<span class="_ _1b"> </span>S<span class="_ _6"></span>o<span class="_ _8"> </span>will<span class="_ _11"> </span>use<span class="_ _11"> </span>the<span class="_ _11"> </span>conv<span class="_ _0"></span>enience</div><div class="t m0 x9 h9 yd3f ff3 fs5 fc0 sc0 ls0 ws0">notation</div><div class="t m0 x149 hb yd40 ff6 fs5 fc0 sc0 ls0 ws0">jumpLeft<span class="ff9">(<span class="ff7">p</span>)</span></div><div class="t m0 xfc hb yd41 ff9 fs5 fc0 sc0 ls0 ws0">:</div><div class="t m0 x14 hb yd40 ff9 fs5 fc0 sc0 ls0 ws0">=<span class="_ _3"> </span><span class="ff6">jump</span></div><div class="t m0 x132 h1a yd42 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x12d h9 yd40 ff7 fs5 fc0 sc0 ls0 ws0">p<span class="ff3">,<span class="_ _9"> </span></span>0</div><div class="t m0 x1a2 h1a yd42 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x1b4 h9 yd40 ff3 fs5 fc0 sc0 ls0 ws0">and</div><div class="t m0 x30 hb yd43 ff6 fs5 fc0 sc0 ls0 ws0">jumpRight<span class="ff9">(<span class="ff7">p</span>)</span></div><div class="t m0 xfc hb yd44 ff9 fs5 fc0 sc0 ls0 ws0">:</div><div class="t m0 x14 hb yd43 ff9 fs5 fc0 sc0 ls0 ws0">=<span class="_ _3"> </span><span class="ff6">jump</span></div><div class="t m0 x132 h1a yd45 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x12d hb yd43 ff7 fs5 fc0 sc0 ls0 ws0">p<span class="ff3">,<span class="_ _9"> </span></span>`<span class="ff9">(</span>p<span class="ff9">)</span></div><div class="t m0 x140 h1a yd45 ff11 fs5 fc0 sc0 ls0 ws0"></div><div class="t m0 x9 h8 yd46 ff3 fs5 fc0 sc0 ls0 ws0">instead<span class="_ _5"> </span>of <span class="ff6">jump</span>.</div><div class="t m0 x9 h9 yd47 ff3 fs5 fc0 sc0 ls0 ws0">No<span class="_ _0"></span>w<span class="_ _5"> </span>that<span class="_ _5"> </span>w<span class="_ _2"></span>e<span class="_ _5"> </span>happily<span class="_ _5"> </span>observ<span class="_ _0"></span>ed<span class="_ _5"> </span>that<span class="_ _3"> </span>w<span class="_ _0"></span>e<span class="_ _5"> </span>can<span class="_ _5"> </span>skip<span class="_ _3"> </span>scanning,<span class="_ _5"> </span>a<span class="_ _5"> </span>reminder<span class="_ _5"> </span>might<span class="_ _3"> </span>be<span class="_ _5"> </span>adequate:</div><div class="t m0 x9 h8 yd48 ff3 fs5 fc0 sc0 ls0 ws0">W<span class="_ _c"></span>e<span class="_ _f"> </span>still<span class="_ _f"> </span>need<span class="_ _f"> </span>to<span class="_ _f"> </span>check<span class="_ _f"> </span>for<span class="_ _f"> </span>matching<span class="_ _1"> </span>terminals<span class="_ _f"> </span><span class="ff6">somewhere</span>;<span class="_ _f"> </span>and<span class="_ _1"> </span>ev<span class="_ _2"></span>en<span class="_ _f"> </span>more:<span class="_ _11"> </span>As<span class="_ _f"> </span>w<span class="_ _0"></span>e<span class="_ _f"> </span>use<span class="_ _f"> </span>rule</div><div class="t m0 x9 h9 yd49 ff3 fs5 fc0 sc0 ls0 ws0">templates<span class="_ _5"> </span>for<span class="_ _f"> </span>rules<span class="_ _5"> </span>differing<span class="_ _5"> </span>only<span class="_ _f"> </span>in<span class="_ _5"> </span>the<span class="_ _f"> </span>terminals<span class="_ _f"> </span>produced,<span class="_ _5"> </span>w<span class="_ _0"></span>e<span class="_ _f"> </span>need<span class="_ _5"> </span>to<span class="_ _f"> </span>kno<span class="_ _0"></span>w<span class="_ _5"> </span>the<span class="_ _f"> </span>ter<span class="_ _6"></span>mi-</div><div class="t m0 x9 he yd4a ff3 fs5 fc0 sc0 ls0 ws0">nals<span class="_ _f"> </span>to<span class="_ _f"> </span>assign<span class="_ _f"> </span>the<span class="_ _1"> </span>correct<span class="_ _f"> </span>rule<span class="_ _f"> </span>probability!<span class="_ _d"> </span>Fortunately<span class="_ _c"></span>,<span class="_ _1"> </span>all<span class="_ _f"> </span>these<span class="_ _1"> </span>issues<span class="_ _f"> </span>are<span class="_ _f"> </span>solv<span class="_ _0"></span>ed<span class="_ _f"> </span>by<span class="_ _5"> </span><span class="ff1">late</span></div><div class="t m0 x9 he yd4b ff1 fs5 fc0 sc0 ls0 ws0">item v<span class="_ _2"></span>alue com<span class="_ _6"></span>putation<span class="ff3">:</span></div><div class="t m0 x9 h12 yd4c ff1 fs2 fc0 sc0 ls0 ws0">4.7.<span class="_ _23"> </span>Late it<span class="_ _2"></span>em value computation</div><div class="t m0 x9 ha yd4d ff3 fs5 fc0 sc0 ls0 ws0">Classical<span class="_ _1"> </span>E<span class="ff4">arley<span class="_ _13"> </span></span>semiring<span class="_ _13"> </span>parsing<span class="_ _13"> </span>uses<span class="_ _13"> </span>the<span class="_ _1"> </span>rule<span class="_ _13"> </span>probability<span class="_ _13"> </span>in<span class="_ _1"> </span>the<span class="_ _13"> </span>prediction<span class="_ _13"> </span>step.<span class="_ _21"> </span>This</div><div class="t m0 x9 h9 yd4e ff3 fs5 fc0 sc0 ls0 ws0">does not<span class="_ _5"> </span>allo<span class="_ _2"></span>w<span class="_ _5"> </span>the use<span class="_ _3"> </span>of<span class="_ _3"> </span>rule<span class="_ _5"> </span>templates whose<span class="_ _3"> </span>probability depends<span class="_ _5"> </span>on terminals<span class="_ _5"> </span>found in</div><div class="t m0 x9 h9 yd4f ff3 fs5 fc0 sc0 ls0 ws0">later<span class="_ _f"> </span>scanning<span class="_ _f"> </span>steps,<span class="_ _1"> </span>as<span class="_ _f"> </span>the<span class="_ _f"> </span>v<span class="_ _0"></span>alue<span class="_ _f"> </span>of<span class="_ _f"> </span>the<span class="_ _f"> </span>predicted<span class="_ _f"> </span>item<span class="_ _1"> </span>is<span class="_ _f"> </span>ﬁxed<span class="_ _f"> </span>long<span class="_ _f"> </span>before<span class="_ _f"> </span>the<span class="_ _f"> </span>ter<span class="_ _6"></span>minals</div><div class="t m0 x9 h9 yd50 ff3 fs5 fc0 sc0 ls0 ws0">at<span class="_ _5"> </span>the right<span class="_ _5"> </span>are<span class="_ _5"> </span>kno<span class="_ _2"></span>wn.</div><div class="t m0 x13 h8 yd51 ff3 fs5 fc0 sc0 ls0 ws0">Therefore,<span class="_ _d"> </span>w<span class="_ _2"></span>e<span class="_ _11"> </span><span class="ff6">postpone<span class="_ _a"> </span></span>taking<span class="_ _a"> </span>rule<span class="_ _11"> </span>probabilities<span class="_ _a"> </span>into<span class="_ _11"> </span>account<span class="_ _a"> </span>until<span class="_ _a"> </span><span class="ff6">ﬁnalization<span class="_ _9"> </span></span>—<span class="_ _9"> </span>i.<span class="_ _9"> </span>e.</div><div class="t m0 x9 h9 yd52 ff3 fs5 fc0 sc0 ls0 ws0">until<span class="_ _f"> </span>the<span class="_ _f"> </span>dot<span class="_ _f"> </span>arrives<span class="_ _5"> </span>at<span class="_ _f"> </span>the<span class="_ _1"> </span>v<span class="_ _0"></span>ery<span class="_ _f"> </span>right.<span class="_ _10"> </span>This<span class="_ _f"> </span>ma<span class="_ _0"></span>y<span class="_ _f"> </span>happen<span class="_ _f"> </span>directly<span class="_ _f"> </span>after<span class="_ _1"> </span>prediction<span class="_ _9"> </span>—<span class="_ _9"> </span>if<span class="_ _f"> </span>the</div><div class="t m0 x9 h8 y39 ff3 fs5 fc0 sc0 ls0 ws0">item<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>ter<span class="_ _6"></span>minating<span class="_ _13"> </span>rule<span class="_ _9"> </span>—<span class="_ _9"> </span>or<span class="_ _13"> </span>other<span class="_ _6"></span>wise<span class="_ _13"> </span>after<span class="_ _13"> </span>the<span class="_ _13"> </span>the<span class="_ _8"> </span><span class="ff6">last<span class="_ _13"> </span></span>completion.<span class="_ _23"> </span>For<span class="_ _8"> </span>terminating</div><div class="t m0 x9 h9 y3a ff3 fs5 fc0 sc0 ls0 ws0">rules,<span class="_ _5"> </span>their<span class="_ _5"> </span>probability<span class="_ _5"> </span>is<span class="_ _5"> </span>known<span class="_ _5"> </span>at<span class="_ _5"> </span>time<span class="_ _5"> </span>of<span class="_ _5"> </span>prediction<span class="_ _9"> </span>—<span class="_ _9"> </span>w<span class="_ _0"></span>e<span class="_ _5"> </span>know<span class="_ _5"> </span>the<span class="_ _5"> </span>part<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span>input<span class="_ _5"> </span>to</div><div class="t m0 x9 h9 y3b ff3 fs5 fc0 sc0 ls0 ws0">match<span class="_ _f"> </span>with<span class="_ _f"> </span>the<span class="_ _1"> </span>rule’s<span class="_ _f"> </span>ter<span class="_ _6"></span>minals.<span class="_ _d"> </span>S<span class="_ _6"></span>o<span class="_ _f"> </span>w<span class="_ _0"></span>e<span class="_ _f"> </span>giv<span class="_ _0"></span>e<span class="_ _f"> </span>those<span class="_ _f"> </span>items<span class="_ _f"> </span>the<span class="_ _1"> </span>appropriate<span class="_ _f"> </span>v<span class="_ _0"></span>alue.<span class="_ _d"> </span>For<span class="_ _1"> </span>non-</div><div class="t m0 x9 h9 y3c ff3 fs5 fc0 sc0 ls0 ws0">terminating<span class="_ _5"> </span>rules,<span class="_ _5"> </span>the<span class="_ _3"> </span>value<span class="_ _3"> </span>of<span class="_ _5"> </span>a<span class="_ _5"> </span>newly<span class="_ _3"> </span>predicted<span class="_ _5"> </span>item<span class="_ _5"> </span>is<span class="_ _3"> </span>simply<span class="_ _5"> </span>set<span class="_ _5"> </span>to<span class="_ _3"> </span><span class="ff12">1</span>.<span class="_ _13"> </span>Then<span class="_ _5"> </span>w<span class="_ _2"></span>e<span class="_ _5"> </span>ha<span class="_ _0"></span>v<span class="_ _0"></span>e<span class="_ _5"> </span>to</div><div class="t m0 x9 h9 y3d ff3 fs5 fc0 sc0 ls0 ws0">check<span class="_ _5"> </span>in<span class="_ _f"> </span>ev<span class="_ _2"></span>ery<span class="_ _f"> </span>completion,<span class="_ _f"> </span>whether<span class="_ _5"> </span>the<span class="_ _f"> </span>conclusion’s<span class="_ _5"> </span>dot<span class="_ _5"> </span>has<span class="_ _f"> </span>reached<span class="_ _5"> </span>the<span class="_ _f"> </span>right<span class="_ _5"> </span>end<span class="_ _9"> </span>—<span class="_ _9"> </span>if<span class="_ _f"> </span>it</div><div class="t m0 x9 h9 y3e ff3 fs5 fc0 sc0 ls0 ws0">has,<span class="_ _5"> </span>w<span class="_ _2"></span>e<span class="_ _5"> </span>multiply<span class="_ _3"> </span>its<span class="_ _5"> </span>new value<span class="_ _3"> </span>by<span class="_ _3"> </span>the<span class="_ _5"> </span>then<span class="_ _3"> </span>known<span class="_ _3"> </span>rule<span class="_ _5"> </span>probability<span class="_ _c"></span>.</div><div class="t m0 x13 h8 y655 ff3 fs5 fc0 sc0 ls0 ws0">It<span class="_ _3"> </span>is<span class="_ _5"> </span>important to<span class="_ _3"> </span>note,<span class="_ _5"> </span>that items<span class="_ _5"> </span>with the<span class="_ _5"> </span>dot <span class="ff6">not<span class="_ _3"> </span></span>at<span class="_ _5"> </span>the v<span class="_ _0"></span>er<span class="_ _6"></span>y<span class="_ _3"> </span>right<span class="_ _9"> </span>—<span class="_ _9"> </span>i.<span class="_ _7"> </span>e.<span class="_ _3"> </span>exactly<span class="_ _5"> </span>those</div><div class="t m0 x9 h8 y656 ff3 fs5 fc0 sc0 ls0 ws0">items,<span class="_ _f"> </span>where<span class="_ _f"> </span>the<span class="_ _f"> </span>rule<span class="_ _1"> </span>probability<span class="_ _f"> </span>is<span class="_ _f"> </span>still<span class="_ _f"> </span>missing<span class="_ _9"> </span>—<span class="_ _7"> </span>are<span class="_ _f"> </span><span class="ff6">only<span class="_ _f"> </span></span>used<span class="_ _f"> </span>in<span class="_ _f"> </span>completions<span class="_ _f"> </span>deriving</div><div class="t m0 x9 h9 y657 ff3 fs5 fc0 sc0 ls0 ws0">an<span class="_ _1"> </span>item<span class="_ _1"> </span>with<span class="_ _1"> </span>the<span class="_ _13"> </span>same<span class="_ _1"> </span>rule.<span class="_ _22"> </span>If<span class="_ _1"> </span>the<span class="_ _1"> </span>shifted<span class="_ _13"> </span>dot<span class="_ _1"> </span>is<span class="_ _1"> </span>still<span class="_ _13"> </span>not<span class="_ _1"> </span>at<span class="_ _1"> </span>the<span class="_ _1"> </span>right<span class="_ _13"> </span>end,<span class="_ _13"> </span>not<span class="_ _1"> </span>including</div><div class="t m0 x9 h9 y377 ff3 fs5 fc0 sc0 ls0 ws0">the<span class="_ _f"> </span>rule<span class="_ _1"> </span>probability<span class="_ _1"> </span>is<span class="_ _1"> </span>the<span class="_ _1"> </span>correct<span class="_ _1"> </span>thing<span class="_ _1"> </span>to<span class="_ _f"> </span>do.<span class="_ _22"> </span>And<span class="_ _f"> </span>if<span class="_ _1"> </span>the<span class="_ _1"> </span>dot<span class="_ _1"> </span>has<span class="_ _1"> </span>reached<span class="_ _1"> </span>the<span class="_ _1"> </span>right<span class="_ _1"> </span>end,</div><div class="t m0 x9 h9 y3f ff3 fs5 fc0 sc0 ls0 ws0">w<span class="_ _2"></span>e<span class="_ _8"> </span>explicitly<span class="_ _13"> </span>include<span class="_ _13"> </span>the<span class="_ _8"> </span>probability<span class="_ _13"> </span>now<span class="_ _c"></span>,<span class="_ _8"> </span>thereb<span class="_ _0"></span>y<span class="_ _13"> </span>maintaining<span class="_ _13"> </span>our<span class="_ _8"> </span>inv<span class="_ _0"></span>ariant.<span class="_ _18"> </span>The<span class="_ _13"> </span>right</div><div class="t m0 x50 ha y36 ff4 fs5 fc0 sc0 ls0 ws0">63</div></div><div class="pi" data-data='{"ctm":[1.679893,0.000000,0.000000,1.679893,0.000000,0.000000]}'></div></div>
