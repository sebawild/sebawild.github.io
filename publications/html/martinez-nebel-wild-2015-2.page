<div id="pf2" class="pf w0 h0" data-page-no="2"><div class="pc pc2 w0 h0"><img class="bi xd y53 w1 h1" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAABCAIAAADl+u99AAAACXBIWXMAABYlAAAWJQFJUiTwAAAADElEQVQI12NgGBYAAADHAAFE0GAnAAAAAElFTkSuQmCC"/><div class="t m0 x0 h8 y54 ff5 fs4 fc0 sc0 ls0 ws0">then<span class="_ _c"> </span>lead<span class="_ _4"> </span>to<span class="_ _c"> </span>its<span class="_ _4"> </span>replacement<span class="_ _c"> </span>in<span class="_ _c"> </span>Jav<span class="_ _b"></span>a<span class="_ _4"> </span>7<span class="_ _c"> </span>by<span class="_ _c"> </span>Y<span class="_ _b"></span>aroslav-</div><div class="t m0 x0 h8 y55 ff5 fs4 fc0 sc0 ls0 ws0">skiy’s<span class="_ _5"> </span>dual-piv<span class="_ _1"></span>ot<span class="_ _5"> </span>Quicksort<span class="_ _4"> </span>(YQS).</div><div class="t m0 xa h8 y56 ff5 fs4 fc0 sc0 ls0 ws0">An<span class="_ _0"> </span>analytic<span class="_ _f"> </span>explanation of<span class="_ _f"> </span>the<span class="_ _0"> </span>sup<span class="_ _3"></span>eriorit<span class="_ _1"></span>y<span class="_ _0"> </span>of</div><div class="t m0 x0 h8 y57 ff5 fs4 fc0 sc0 ls0 ws0">YQS<span class="_ _0"> </span>w<span class="_ _1"></span>as lac<span class="_ _1"></span>king<span class="_ _0"> </span>at<span class="_ _f"> </span>that time<span class="_ _f"> </span>(and is<span class="_ _0"> </span>still<span class="_ _f"> </span>op<span class="_ _3"></span>en</div><div class="t m0 x0 h8 y58 ff5 fs4 fc0 sc0 ls0 ws0">to<span class="_ _e"> </span>some<span class="_ _6"> </span>exten<span class="_ _1"></span>t).<span class="_ _1d"> </span>W<span class="_ _b"></span>e<span class="_ _e"> </span>show<span class="_ _1"></span>ed<span class="_ _e"> </span>that<span class="_ _6"> </span>YQS<span class="_ _e"> </span>indeed</div><div class="t m0 x0 h8 y59 ff5 fs4 fc0 sc0 ls0 ws0">sa<span class="_ _1"></span>ves<span class="_ _14"> </span><span class="ff8">5<span class="_ _13"> </span>%<span class="_ _12"> </span></span>of<span class="_ _14"> </span>comparisons<span class="_ _12"> </span>(for<span class="_ _14"> </span>random<span class="_ _12"> </span>piv<span class="_ _1"></span>ots);</div><div class="t m0 x0 h8 y5a ff5 fs4 fc0 sc0 ls0 ws0">but<span class="_ _14"> </span>also<span class="_ _14"> </span>that<span class="_ _12"> </span>it<span class="_ _14"> </span>needs<span class="_ _14"> </span><span class="ff8">80<span class="_ _11"> </span>%<span class="_ _14"> </span><span class="ff7">mor<span class="_ _1"></span>e<span class="_ _12"> </span><span class="ff5">swaps<span class="_ _14"> </span>than</span></span></span></div><div class="t m0 x0 h8 y5b ff5 fs4 fc0 sc0 ls0 ws0">CQS<span class="_ _6"> </span>[18,<span class="_ _6"> </span>19].<span class="_ _15"> </span>Arguably<span class="_ _b"></span>,<span class="_ _9"> </span>these<span class="_ _6"> </span>traditional<span class="_ _6"> </span>cost</div><div class="t m0 x0 h8 y5c ff5 fs4 fc0 sc0 ls0 ws0">measures do<span class="_ _e"> </span>not explain<span class="_ _e"> </span>the running<span class="_ _e"> </span>times well</div><div class="t m0 x0 h8 y5d ff5 fs4 fc0 sc0 ls0 ws0">and<span class="_ _2"> </span>it<span class="_ _8"> </span>is<span class="_ _2"> </span>likely<span class="_ _5"> </span>that<span class="_ _8"> </span>features<span class="_ _2"> </span>of<span class="_ _8"> </span>modern<span class="_ _8"> </span>CPUs<span class="_ _2"> </span>like</div><div class="t m0 x0 h8 y5e ff7 fs4 fc0 sc0 ls0 ws0">memory<span class="_ _e"> </span>hier<span class="_ _1"></span>ar<span class="_ _1"></span>chies<span class="_ _6"> </span><span class="ff5">and </span>pip<span class="_ _1"></span>elines<span class="_ _6"> </span><span class="ff5">are<span class="_ _e"> </span>the<span class="_ _e"> </span>prime</span></div><div class="t m0 x0 h8 y5f ff5 fs4 fc0 sc0 ls0 ws0">reason<span class="_ _f"> </span>for<span class="_ _f"> </span>the<span class="_ _0"> </span>algorithm’s<span class="_ _f"> </span>eﬃciency<span class="_ _b"></span>.<span class="_ _10"> </span>This<span class="_ _7"> </span>would</div><div class="t m0 x0 h8 y60 ff5 fs4 fc0 sc0 ls0 ws0">b<span class="_ _3"></span>e<span class="_ _7"> </span>in<span class="_ _7"> </span>accordance<span class="_ _7"> </span>with<span class="_ _7"> </span>the<span class="_ _7"> </span>aforementioned<span class="_ _8"> </span>results</div><div class="t m0 x0 h8 y61 ff5 fs4 fc0 sc0 ls0 ws0">in<span class="_ _0"> </span>whic<span class="_ _1"></span>h<span class="_ _0"> </span>m<span class="_ _1"></span>ulti-pivot<span class="_ _f"> </span>Quicksort<span class="_ _f"> </span>was<span class="_ _f"> </span>less eﬃcien<span class="_ _1"></span>t,</div><div class="t m0 x0 h8 y62 ff5 fs4 fc0 sc0 ls0 ws0">as<span class="_ _9"> </span>the<span class="_ _9"> </span>exp<span class="_ _3"></span>erimen<span class="_ _1"></span>ts<span class="_ _9"> </span>were<span class="_ _6"> </span>done<span class="_ _9"> </span>in<span class="_ _9"> </span>a<span class="_ _9"> </span>time<span class="_ _9"> </span>when</div><div class="t m0 x0 h8 y63 ff5 fs4 fc0 sc0 ls0 ws0">computers<span class="_ _5"> </span>simply<span class="_ _5"> </span>did<span class="_ _5"> </span>not<span class="_ _5"> </span>ha<span class="_ _1"></span>ve<span class="_ _4"> </span>such<span class="_ _4"> </span>features.</div><div class="t m0 xa h8 y64 ff5 fs4 fc0 sc0 ls0 ws0">In<span class="_ _a"> </span>this<span class="_ _d"> </span>pap<span class="_ _3"></span>er<span class="_ _a"> </span>we<span class="_ _d"> </span>address<span class="_ _a"> </span>the<span class="_ _a"> </span>eﬀects<span class="_ _a"> </span>of<span class="_ _a"> </span>pip<span class="_ _3"></span>elines,</div><div class="t m0 x0 h8 y65 ff5 fs4 fc0 sc0 ls0 ws0">whic<span class="_ _1"></span>h<span class="_ _f"> </span>are<span class="_ _f"> </span>used<span class="_ _f"> </span>to<span class="_ _f"> </span>sp<span class="_ _3"></span>eed<span class="_ _f"> </span>up<span class="_ _f"> </span>execution<span class="_ _f"> </span>as<span class="_ _f"> </span>follo<span class="_ _1"></span>ws:</div><div class="t m0 x0 h8 y66 ff5 fs4 fc0 sc0 ls0 ws0">Inside<span class="_ _c"> </span>the<span class="_ _c"> </span>CPU,<span class="_ _c"> </span>mac<span class="_ _1"></span>hine<span class="_ _c"> </span>instructions<span class="_ _c"> </span>are<span class="_ _c"> </span>split<span class="_ _c"> </span>into</div><div class="t m0 x0 h8 y67 ff7 fs4 fc0 sc0 ls0 ws0">phases<span class="_ _e"> </span><span class="ff5">like “fetc<span class="_ _1"></span>hing the instruction”,<span class="_ _e"> </span>“deco<span class="_ _3"></span>ding</span></div><div class="t m0 x0 h8 y68 ff5 fs4 fc0 sc0 ls0 ws0">and<span class="_ _d"> </span>loading<span class="_ _d"> </span>data”,<span class="_ _a"> </span>“executing<span class="_ _a"> </span>the<span class="_ _d"> </span>instruction”,<span class="_ _a"> </span>and</div><div class="t m0 x0 h8 y69 ff5 fs4 fc0 sc0 ls0 ws0">“writing<span class="_ _5"> </span>back<span class="_ _4"> </span>results”<span class="_ _1e"></span>.<span class="_ _f"> </span>Each<span class="_ _4"> </span>phase<span class="_ _2"> </span>tak<span class="_ _1"></span>es<span class="_ _5"> </span>one<span class="_ _2"> </span>CPU</div><div class="t m0 x0 h8 y6a ff5 fs4 fc0 sc0 ls0 ws0">cycle.<span class="_ _10"> </span>Mo<span class="_ _3"></span>dern<span class="_ _f"> </span>CPUs execute<span class="_ _7"> </span>diﬀerent<span class="_ _f"> </span>phases<span class="_ _0"> </span>in</div><div class="t m0 x0 h8 y6b ff5 fs4 fc0 sc0 ls0 ws0">parallel,<span class="_ _c"> </span>i.<span class="_ _17"></span>e.,<span class="_ _4"> </span>if<span class="_ _4"> </span>there<span class="_ _c"> </span>are<span class="_ _4"> </span><span class="ffe">L<span class="_ _c"> </span></span>phases,<span class="_ _4"> </span>one<span class="_ _4"> </span>can<span class="_ _c"> </span>execute</div><div class="t m0 x0 h8 y6c ffe fs4 fc0 sc0 ls0 ws0">L<span class="_ _7"> </span><span class="ff5">instructions<span class="_ _f"> </span>at<span class="_ _f"> </span>once,<span class="_ _0"> </span>eac<span class="_ _1"></span>h<span class="_ _7"> </span>in<span class="_ _f"> </span>a<span class="_ _f"> </span>diﬀerent<span class="_ _7"> </span>phase,</span></div><div class="t m0 x0 h8 y6d ff5 fs4 fc0 sc0 ls0 ws0">resulting<span class="_ _5"> </span>in<span class="_ _5"> </span>a<span class="_ _5"> </span>sp<span class="_ _3"></span>eed-up<span class="_ _5"> </span>of<span class="_ _5"> </span><span class="ffe">L</span>.</div><div class="t m0 xa h8 y6e ff5 fs4 fc0 sc0 ls0 ws0">The<span class="_ _a"> </span>downside<span class="_ _d"> </span>of<span class="_ _a"> </span>this<span class="_ _c"> </span>idea,<span class="_ _a"> </span>how<span class="_ _1"></span>ever,<span class="_ _a"> </span>comes<span class="_ _a"> </span>with</div><div class="t m0 x0 h8 y6f ff7 fs4 fc0 sc0 ls0 ws0">c<span class="_ _1"></span>onditional<span class="_ _c"> </span>jumps<span class="ff5">.<span class="_ _7"> </span>F<span class="_ _b"></span>or<span class="_ _c"> </span>those,<span class="_ _c"> </span>the<span class="_ _c"> </span>CPU<span class="_ _c"> </span>will<span class="_ _c"> </span>ha<span class="_ _1"></span>ve<span class="_ _a"> </span>to</span></div><div class="t m0 x0 h8 y70 ff5 fs4 fc0 sc0 ls0 ws0">decide<span class="_ _d"> </span>the<span class="_ _a"> </span>outcome<span class="_ _a"> </span><span class="ff7">b<span class="_ _1"></span>efor<span class="_ _1"></span>e<span class="_ _a"> </span><span class="ff5">it<span class="_ _a"> </span>has<span class="_ _d"> </span>actually<span class="_ _a"> </span>b<span class="_ _3"></span>een<span class="_ _a"> </span>com-</span></span></div><div class="t m0 x0 h8 y71 ff5 fs4 fc0 sc0 ls0 ws0">puted<span class="_ _13"> </span>—<span class="_ _13"> </span>otherwise<span class="_ _5"> </span>it<span class="_ _4"> </span>could<span class="_ _4"> </span>not<span class="_ _4"> </span>go<span class="_ _4"> </span>on<span class="_ _5"> </span>with<span class="_ _4"> </span>the<span class="_ _4"> </span>ﬁrst</div><div class="t m0 x0 h8 y72 ff5 fs4 fc0 sc0 ls0 ws0">phases<span class="_ _c"> </span>of<span class="_ _4"> </span>the<span class="_ _4"> </span>subsequent<span class="_ _c"> </span>commands.<span class="_ _7"> </span>T<span class="_ _b"></span>o<span class="_ _4"> </span>cop<span class="_ _3"></span>e<span class="_ _4"> </span>with</div><div class="t m0 x0 h8 y73 ff5 fs4 fc0 sc0 ls0 ws0">that,<span class="_ _5"> </span>several<span class="_ _4"> </span><span class="ffd">branch<span class="_ _5"> </span>prediction<span class="_ _5"> </span>schemes<span class="_ _2"> </span></span>hav<span class="_ _1"></span>e<span class="_ _5"> </span>b<span class="_ _3"></span>een</div><div class="t m0 x0 h8 y74 ff5 fs4 fc0 sc0 ls0 ws0">in<span class="_ _1"></span>ven<span class="_ _1"></span>ted,<span class="_ _a"> </span>which<span class="_ _d"> </span>try<span class="_ _d"> </span>to<span class="_ _d"> </span><span class="ff7">guess<span class="_ _c"> </span></span>the<span class="_ _a"> </span>actual<span class="_ _d"> </span>outcome.<span class="_ _7"> </span>In</div><div class="t m0 x0 h8 y75 ff5 fs4 fc0 sc0 ls0 ws0">the<span class="_ _a"> </span>simplest<span class="_ _c"> </span>case<span class="_ _a"> </span>each<span class="_ _d"> </span>branch<span class="_ _a"> </span>(conditional<span class="_ _a"> </span>jump)<span class="_ _c"> </span>is</div><div class="t m0 x0 h8 y76 ff5 fs4 fc0 sc0 ls0 ws0">mark<span class="_ _1"></span>ed<span class="_ _2"> </span>“probably<span class="_ _5"> </span>taken”<span class="_ _4"> </span>or<span class="_ _2"> </span>“probably<span class="_ _5"> </span>not<span class="_ _2"> </span>tak<span class="_ _1"></span>en”</div><div class="t m0 x0 h8 y77 ff5 fs4 fc0 sc0 ls0 ws0">at<span class="_ _e"> </span>compile<span class="_ _6"> </span>time<span class="_ _e"> </span>and<span class="_ _e"> </span>the<span class="_ _6"> </span>CPU<span class="_ _e"> </span>acts<span class="_ _6"> </span>accordingly<span class="_ _b"></span>.</div><div class="t m0 x0 h8 y78 ff5 fs4 fc0 sc0 ls0 ws0">As branc<span class="_ _1"></span>h outcomes<span class="_ _f"> </span>most often depend on data</div><div class="t m0 x0 h8 y79 ff5 fs4 fc0 sc0 ls0 ws0">not<span class="_ _8"> </span>known<span class="_ _8"> </span>at<span class="_ _8"> </span>compile<span class="_ _7"> </span>time,<span class="_ _7"> </span>this<span class="_ _7"> </span>strategy<span class="_ _7"> </span>is<span class="_ _8"> </span>quite</div><div class="t m0 x0 h8 y7a ff5 fs4 fc0 sc0 ls0 ws0">limited.<span class="_ _1d"> </span>In order<span class="_ _6"> </span>to <span class="ff7">adapt<span class="_ _9"> </span></span>predictions<span class="_ _e"> </span>to<span class="_ _e"> </span>actu-</div><div class="t m0 x0 h8 y7b ff5 fs4 fc0 sc0 ls0 ws0">ally observed b<span class="_ _3"></span>eha<span class="_ _1"></span>vior sp<span class="_ _3"></span>ecial<span class="_ _e"> </span>hardw<span class="_ _1"></span>are<span class="_ _e"> </span>supp<span class="_ _3"></span>ort</div><div class="t m0 x0 h8 y7c ff5 fs4 fc0 sc0 ls0 ws0">is needed.<span class="_ _1f"> </span>F<span class="_ _b"></span>or the<span class="_ _f"> </span>so-called <span class="ffd">1-bit predictor</span>, the</div><div class="t m0 x0 h8 y7d ff5 fs4 fc0 sc0 ls0 ws0">CPU<span class="_ _f"> </span>stores<span class="_ _f"> </span>for<span class="_ _f"> </span>each<span class="_ _7"> </span>branch<span class="_ _7"> </span>in<span class="_ _f"> </span>the<span class="_ _0"> </span>code<span class="_ _f"> </span>whether</div><div class="t m0 x0 h8 y7e ff5 fs4 fc0 sc0 ls0 ws0">or<span class="_ _8"> </span>not<span class="_ _7"> </span>it<span class="_ _7"> </span>w<span class="_ _1"></span>as<span class="_ _7"> </span>tak<span class="_ _1"></span>en<span class="_ _7"> </span>the<span class="_ _7"> </span>last<span class="_ _8"> </span>time<span class="_ _7"> </span>it<span class="_ _7"> </span>w<span class="_ _1"></span>as<span class="_ _7"> </span>executed</div><div class="t m0 x0 h8 y7f ff5 fs4 fc0 sc0 ls0 ws0">and<span class="_ _2"> </span>assumes<span class="_ _8"> </span>the<span class="_ _2"> </span>same<span class="_ _2"> </span>b<span class="_ _3"></span>ehavior<span class="_ _2"> </span>for<span class="_ _2"> </span>the<span class="_ _8"> </span>future.<span class="_ _6"> </span>In</div><div class="t m0 x0 h8 y80 ff5 fs4 fc0 sc0 ls0 ws0">a<span class="_ _7"> </span><span class="ffd">2-bit<span class="_ _f"> </span>prediction<span class="_ _0"> </span></span>sc<span class="_ _1"></span>heme,<span class="_ _0"> </span>the<span class="_ _7"> </span>CPU<span class="_ _f"> </span>has<span class="_ _f"> </span>to<span class="_ _f"> </span>mak<span class="_ _1"></span>e</div><div class="t m0 x0 h8 y81 ff5 fs4 fc0 sc0 ls0 ws0">a<span class="_ _f"> </span>wrong<span class="_ _0"> </span>prediction<span class="_ _f"> </span>twice<span class="_ _7"> </span>b<span class="_ _3"></span>efore<span class="_ _0"> </span>switc<span class="_ _1"></span>hing.<span class="_ _10"> </span>Suc<span class="_ _1"></span>h</div><div class="t m0 x0 h8 y82 ff5 fs4 fc0 sc0 ls0 ws0">simple<span class="_ _8"> </span>sc<span class="_ _1"></span>hemes<span class="_ _8"> </span>ha<span class="_ _1"></span>ve<span class="_ _2"> </span>b<span class="_ _3"></span>een<span class="_ _8"> </span>used<span class="_ _8"> </span>b<span class="_ _1"></span>y<span class="_ _8"> </span>the<span class="_ _8"> </span>ﬁrst<span class="_ _8"> </span>CPUs</div><div class="t m0 xd h8 y54 ff5 fs4 fc0 sc0 ls0 ws0">with pip<span class="_ _3"></span>elining.<span class="_ _20"> </span>Mo<span class="_ _3"></span>dern micropro<span class="_ _3"></span>cessors imple-</div><div class="t m0 xd h8 y55 ff5 fs4 fc0 sc0 ls0 ws0">men<span class="_ _1"></span>t<span class="_ _f"> </span>more<span class="_ _f"> </span>sophisticated<span class="_ _f"> </span>heuristics<span class="_ _f"> </span>[5], whic<span class="_ _1"></span>h<span class="_ _f"> </span>try</div><div class="t m0 xd h8 y83 ff5 fs4 fc0 sc0 ls0 ws0">to<span class="_ _c"> </span>recognize<span class="_ _4"> </span>common<span class="_ _c"> </span>patterns<span class="_ _4"> </span>in<span class="_ _c"> </span>branching<span class="_ _c"> </span>b<span class="_ _3"></span>eha<span class="_ _1"></span>v-</div><div class="t m0 xd h8 y57 ff5 fs4 fc0 sc0 ls0 ws0">ior.<span class="_ _f"> </span>As<span class="_ _5"> </span>they<span class="_ _5"> </span>seem<span class="_ _4"> </span>to<span class="_ _3"></span>o<span class="_ _5"> </span>intricate<span class="_ _4"> </span>for<span class="_ _5"> </span>precise<span class="_ _5"> </span>analysis</div><div class="t m0 xd h8 y58 ff5 fs4 fc0 sc0 ls0 ws0">and<span class="_ _c"> </span>are<span class="_ _4"> </span>probably<span class="_ _4"> </span><span class="ff7">inferior<span class="_ _7"> </span></span>to<span class="_ _c"> </span>the<span class="_ _4"> </span>simple<span class="_ _4"> </span>schemes<span class="_ _c"> </span>in</div><div class="t m0 xd h8 y59 ff5 fs4 fc0 sc0 ls0 ws0">Quic<span class="_ _1"></span>ksort</div><div class="t m0 xf h5 y84 ffa fs2 fc0 sc0 ls0 ws0">1</div><div class="t m0 x10 h8 y59 ff5 fs4 fc0 sc0 ls0 ws0">w<span class="_ _1"></span>e<span class="_ _f"> </span>fo<span class="_ _3"></span>cus<span class="_ _7"> </span>on<span class="_ _7"> </span>the<span class="_ _f"> </span>basic<span class="_ _7"> </span>predictors<span class="_ _f"> </span>from</div><div class="t m0 xd h8 y5a ff5 fs4 fc0 sc0 ls0 ws0">ab<span class="_ _3"></span>o<span class="_ _1"></span>ve.</div><div class="t m0 xe h8 y85 ff5 fs4 fc0 sc0 ls0 ws0">In<span class="_ _4"> </span>case<span class="_ _4"> </span>of<span class="_ _4"> </span>a<span class="_ _4"> </span>false<span class="_ _5"> </span>prediction<span class="_ _4"> </span>(<span class="ffd">branc<span class="_ _1"></span>h<span class="_ _4"> </span>mispredic-</span></div><div class="t m0 xd h8 y5c ffd fs4 fc0 sc0 ls0 ws0">tion<span class="_ _8"> </span><span class="ff5">or<span class="_ _7"> </span></span>branc<span class="_ _1"></span>h<span class="_ _8"> </span>miss<span class="ff5">,<span class="_ _7"> </span>brieﬂy<span class="_ _8"> </span>BM)<span class="_ _7"> </span>the<span class="_ _8"> </span>CPU<span class="_ _8"> </span>has<span class="_ _8"> </span>to</span></div><div class="t m0 xd h8 y5d ff7 fs4 fc0 sc0 ls0 ws0">undo<span class="_ _f"> </span><span class="ff5">all<span class="_ _f"> </span>erroneously<span class="_ _f"> </span>executed<span class="_ _f"> </span>steps<span class="_ _7"> </span>(phases)<span class="_ _f"> </span>and</span></div><div class="t m0 xd h8 y5e ff5 fs4 fc0 sc0 ls0 ws0">load the<span class="_ _1c"> </span>correct<span class="_ _e"> </span>instructions instead.<span class="_ _18"> </span>A branch</div><div class="t m0 xd h8 y5f ff5 fs4 fc0 sc0 ls0 ws0">miss<span class="_ _a"> </span>is<span class="_ _d"> </span>thus<span class="_ _d"> </span>a<span class="_ _a"> </span>costly<span class="_ _a"> </span>even<span class="_ _1"></span>t.<span class="_ _7"> </span>As<span class="_ _a"> </span>an<span class="_ _a"> </span>extreme<span class="_ _d"> </span>example,</div><div class="t m0 xd h8 y86 ff5 fs4 fc0 sc0 ls0 ws0">Kaligosi<span class="_ _2"> </span>and<span class="_ _2"> </span>Sanders<span class="_ _2"> </span>[9]<span class="_ _8"> </span>observ<span class="_ _1"></span>ed<span class="_ _2"> </span>on<span class="_ _8"> </span>a<span class="_ _2"> </span>P<span class="_ _1"></span>entium<span class="_ _5"> </span>4</div><div class="t m0 xd h8 y61 ff5 fs4 fc0 sc0 ls0 ws0">Prescott<span class="_ _4"> </span>CPU<span class="_ _4"> </span>(a<span class="_ _4"> </span>pro<span class="_ _3"></span>cessor<span class="_ _4"> </span>with<span class="_ _5"> </span>an<span class="_ _4"> </span>extremely<span class="_ _4"> </span>long</div><div class="t m0 xd h8 y62 ff5 fs4 fc0 sc0 ls0 ws0">pip<span class="_ _3"></span>eline<span class="_ _d"> </span>and<span class="_ _a"> </span>thus<span class="_ _d"> </span>a<span class="_ _a"> </span>high<span class="_ _a"> </span>cost<span class="_ _a"> </span>p<span class="_ _3"></span>er<span class="_ _a"> </span>BM)<span class="_ _a"> </span>that<span class="_ _a"> </span>the<span class="_ _a"> </span>run-</div><div class="t m0 xd h8 y63 ff5 fs4 fc0 sc0 ls0 ws0">ning<span class="_ _8"> </span>time<span class="_ _8"> </span>p<span class="_ _3"></span>enalty<span class="_ _2"> </span>of<span class="_ _8"> </span>a<span class="_ _7"> </span>BM<span class="_ _8"> </span>is<span class="_ _8"> </span>so<span class="_ _8"> </span>high<span class="_ _8"> </span>that<span class="_ _7"> </span>a<span class="_ _8"> </span>v<span class="_ _1"></span>ery</div><div class="t m0 xd h8 y64 ff5 fs4 fc0 sc0 ls0 ws0">sk<span class="_ _1"></span>ewed<span class="_ _a"> </span>pivot<span class="_ _a"> </span>choice<span class="_ _a"> </span>outp<span class="_ _3"></span>erformed<span class="_ _c"> </span>the<span class="_ _c"> </span>typically<span class="_ _a"> </span>op-</div><div class="t m0 xd h8 y87 ff5 fs4 fc0 sc0 ls0 ws0">timal<span class="_ _c"> </span>median<span class="_ _a"> </span>pivot,<span class="_ _c"> </span>ev<span class="_ _1"></span>en<span class="_ _c"> </span>though<span class="_ _c"> </span>the<span class="_ _c"> </span>latter<span class="_ _a"> </span>leads<span class="_ _c"> </span>to</div><div class="t m0 xd h8 y66 ff5 fs4 fc0 sc0 ls0 ws0">m<span class="_ _1"></span>uch<span class="_ _a"> </span>less<span class="_ _a"> </span>executed<span class="_ _c"> </span>instructions<span class="_ _c"> </span>in<span class="_ _a"> </span>total.<span class="_ _7"> </span>The<span class="_ _c"> </span>eﬀect</div><div class="t m0 xd h8 y67 ff5 fs4 fc0 sc0 ls0 ws0">w<span class="_ _1"></span>as<span class="_ _2"> </span>not<span class="_ _5"> </span>repro<span class="_ _3"></span>ducible,<span class="_ _5"> </span>how<span class="_ _1"></span>ever,<span class="_ _4"> </span>on<span class="_ _2"> </span>the<span class="_ _5"> </span>slightly<span class="_ _5"> </span>dif-</div><div class="t m0 xd h8 y68 ff5 fs4 fc0 sc0 ls0 ws0">feren<span class="_ _1"></span>t<span class="_ _8"> </span>P<span class="_ _1"></span>entium<span class="_ _2"> </span>4<span class="_ _8"> </span>Willamette<span class="_ _2"> </span>[1].<span class="_ _9"> </span>Here<span class="_ _2"> </span>t<span class="_ _1"></span>wo<span class="_ _2"> </span>eﬀects</div><div class="t m0 xd h8 y69 ff5 fs4 fc0 sc0 ls0 ws0">coun<span class="_ _1"></span>teract:<span class="_ _14"> </span>a<span class="_ _7"> </span>biased<span class="_ _7"> </span>pivot<span class="_ _7"> </span>mak<span class="_ _1"></span>es<span class="_ _f"> </span>branc<span class="_ _1"></span>hes<span class="_ _f"> </span>easier</div><div class="t m0 xd h8 y6a ff5 fs4 fc0 sc0 ls0 ws0">to<span class="_ _0"> </span>predict<span class="_ _f"> </span>but also<span class="_ _f"> </span>gives<span class="_ _f"> </span>un<span class="_ _1"></span>balanced subproblem</div><div class="t m0 xd h8 y88 ff5 fs4 fc0 sc0 ls0 ws0">sizes.<span class="_ _6"> </span>Bro<span class="_ _3"></span>dal<span class="_ _8"> </span>and<span class="_ _2"> </span>Moruz<span class="_ _8"> </span>[2]<span class="_ _2"> </span>hav<span class="_ _1"></span>e<span class="_ _8"> </span>sho<span class="_ _1"></span>wn<span class="_ _8"> </span>that<span class="_ _2"> </span>this</div><div class="t m0 xd h8 y6c ff5 fs4 fc0 sc0 ls0 ws0">is<span class="_ _2"> </span>a<span class="_ _2"> </span>general<span class="_ _2"> </span>trade-oﬀ<span class="_ _2"> </span>in<span class="_ _2"> </span>comparison-based<span class="_ _8"> </span>sorting:</div><div class="t m0 xd h8 y6d ff5 fs4 fc0 sc0 ls0 ws0">One<span class="_ _5"> </span>can<span class="_ _2"> </span>only<span class="_ _5"> </span>sav<span class="_ _1"></span>e<span class="_ _5"> </span>comparisons<span class="_ _2"> </span>at<span class="_ _2"> </span>the<span class="_ _5"> </span>price<span class="_ _2"> </span>of<span class="_ _5"> </span>ad-</div><div class="t m0 xd h8 y6e ff5 fs4 fc0 sc0 ls0 ws0">ditional<span class="_ _5"> </span>branc<span class="_ _1"></span>h<span class="_ _5"> </span>misses.</div><div class="t m0 xe h8 y6f ff5 fs4 fc0 sc0 ls0 ws0">Diﬀerences<span class="_ _9"> </span>in<span class="_ _6"> </span>the<span class="_ _9"> </span>n<span class="_ _1"></span>umber<span class="_ _9"> </span>of<span class="_ _6"> </span>branch<span class="_ _6"> </span>misses</div><div class="t m0 xd h8 y89 ff5 fs4 fc0 sc0 ls0 ws0">migh<span class="_ _1"></span>t<span class="_ _9"> </span>b<span class="_ _3"></span>e<span class="_ _9"> </span>an<span class="_ _9"> </span>explanation<span class="_ _6"> </span>for<span class="_ _9"> </span>the<span class="_ _9"> </span>sup<span class="_ _3"></span>eriorit<span class="_ _1"></span>y<span class="_ _9"> </span>of</div><div class="t m0 xd h8 y71 ff5 fs4 fc0 sc0 ls0 ws0">YQS and<span class="_ _f"> </span>will th<span class="_ _1"></span>us be analyzed<span class="_ _0"> </span>in<span class="_ _0"> </span>this<span class="_ _0"> </span>paper in</div><div class="t m0 xd h8 y72 ff5 fs4 fc0 sc0 ls0 ws0">connection<span class="_ _9"> </span>with<span class="_ _9"> </span>pivot<span class="_ _9"> </span>sampling.<span class="_ _21"> </span>W<span class="_ _b"></span>e<span class="_ _9"> </span>will<span class="_ _9"> </span>also</div><div class="t m0 xd h8 y73 ff5 fs4 fc0 sc0 ls0 ws0">reconsider branch misses in classic Quicksort b<span class="_ _1"></span>y</div><div class="t m0 xd h8 y74 ff5 fs4 fc0 sc0 ls0 ws0">con<span class="_ _1"></span>tinuing<span class="_ _c"> </span>the<span class="_ _c"> </span>analyses<span class="_ _4"> </span>of<span class="_ _4"> </span>Kaligosi<span class="_ _4"> </span>and<span class="_ _c"> </span>Sanders<span class="_ _4"> </span>[9]</div><div class="t m0 xd h8 y8a ff5 fs4 fc0 sc0 ls0 ws0">and Biggar<span class="_ _0"> </span>et al. [1], we<span class="_ _0"> </span>presen<span class="_ _1"></span>t precise leading</div><div class="t m0 xd h8 y76 ff5 fs4 fc0 sc0 ls0 ws0">terms</div><div class="t m0 x11 h5 y8b ffa fs2 fc0 sc0 ls0 ws0">2</div><div class="t m0 x12 h8 y76 ff5 fs4 fc0 sc0 ls0 ws0">and explicitly address piv<span class="_ _1"></span>ot sampling for</div><div class="t m0 xd h8 y77 ff5 fs4 fc0 sc0 ls0 ws0">ﬁnite<span class="_ _5"> </span>sample<span class="_ _5"> </span>sizes<span class="_ _5"> </span><span class="ffe">k<span class="_ _3"></span></span>.</div><div class="t m0 xe h8 y78 ff5 fs4 fc0 sc0 ls0 ws0">W<span class="_ _b"></span>e<span class="_ _6"> </span>ﬁnd<span class="_ _9"> </span>that<span class="_ _6"> </span>CQS<span class="_ _6"> </span>and<span class="_ _9"> </span>YQS<span class="_ _6"> </span>cause<span class="_ _6"> </span>roughly</div><div class="t m0 xd h8 y79 ff5 fs4 fc0 sc0 ls0 ws0">the<span class="_ _14"> </span>same<span class="_ _12"> </span>n<span class="_ _1"></span>um<span class="_ _1"></span>b<span class="_ _3"></span>er<span class="_ _12"> </span>of<span class="_ _14"> </span>branc<span class="_ _1"></span>h<span class="_ _12"> </span>misses<span class="_ _14"> </span>and<span class="_ _14"> </span>hence</div><div class="t m0 xd h8 y8c ff5 fs4 fc0 sc0 ls0 ws0">pip<span class="_ _3"></span>elining<span class="_ _f"> </span>eﬀects<span class="_ _f"> </span>are<span class="_ _f"> </span><span class="ff7">not </span>a<span class="_ _f"> </span>likely<span class="_ _7"> </span>explanation<span class="_ _f"> </span>for</div><div class="t m0 xd h8 y7b ff5 fs4 fc0 sc0 ls0 ws0">the<span class="_ _14"> </span>sup<span class="_ _3"></span>eriorit<span class="_ _1"></span>y<span class="_ _14"> </span>of<span class="_ _14"> </span>YQS.<span class="_ _9"> </span>Even<span class="_ _9"> </span>if<span class="_ _14"> </span>this<span class="_ _14"> </span>result<span class="_ _14"> </span>in</div><div class="t m0 x13 ha y8d fff fs5 fc0 sc0 ls0 ws0">1</div><div class="t m0 x14 h5 y8e ffa fs2 fc0 sc0 ls0 ws0">There<span class="_ _a"> </span>are<span class="_ _a"> </span>no<span class="_ _a"> </span>branch<span class="_ _a"> </span>patterns<span class="_ _a"> </span>in<span class="_ _a"> </span>Quicksort<span class="_ _a"> </span>(cf.<span class="_ _a"> </span>Section<span class="_ _a"> </span>5.1)!</div><div class="t m0 x13 ha y8f fff fs5 fc0 sc0 ls0 ws0">2</div><div class="t m0 x14 h5 y90 ffa fs2 fc0 sc0 ls0 ws0">By<span class="_ _4"> </span>our<span class="_ _4"> </span>discussion<span class="_ _4"> </span>in<span class="_ _5"> </span>Section<span class="_ _4"> </span>5.1,<span class="_ _5"> </span>w<span class="_ _1"></span>e<span class="_ _5"> </span>also<span class="_ _4"> </span>answer<span class="_ _c"> </span>a<span class="_ _4"> </span>question</div><div class="t m0 xd h5 y91 ffa fs2 fc0 sc0 ls0 ws0">posed<span class="_ _a"> </span>by<span class="_ _d"> </span>Kaligosi<span class="_ _a"> </span>and<span class="_ _a"> </span>Sanders<span class="_ _a"> </span>[9]<span class="_ _d"> </span>in<span class="_ _a"> </span>their<span class="_ _a"> </span>fo<span class="_ _3"></span>otnote<span class="_ _a"> </span>2,<span class="_ _d"> </span>where<span class="_ _a"> </span>they</div><div class="t m0 xd h5 y92 ffa fs2 fc0 sc0 ls0 ws0">ask<span class="_ _a"> </span>for<span class="_ _c"> </span>an<span class="_ _c"> </span>argument<span class="_ _a"> </span>to<span class="_ _c"> </span>mak<span class="_ _1"></span>e<span class="_ _c"> </span>their<span class="_ _c"> </span>heuristic<span class="_ _a"> </span>analysis<span class="_ _1a"> </span>—<span class="_ _13"> </span>assuming</div><div class="t m0 xd h5 y93 ffa fs2 fc0 sc0 ls0 ws0">a<span class="_ _4"> </span>constant<span class="_ _5"> </span>probabilit<span class="_ _1"></span>y<span class="_ _5"> </span><span class="ff10">α<span class="_ _5"> </span></span>for<span class="_ _5"> </span>an<span class="_ _5"> </span>elemen<span class="_ _1"></span>t<span class="_ _5"> </span>to<span class="_ _5"> </span>b<span class="_ _3"></span>e<span class="_ _4"> </span>small<span class="_ _13"> </span>—<span class="_ _1a"> </span>rigorous.</div><div class="t m0 xd h5 y94 ffa fs2 fc0 sc0 ls0 ws0">W<span class="_ _b"></span>e<span class="_ _a"> </span>ﬁnd<span class="_ _d"> </span>it<span class="_ _d"> </span>most<span class="_ _a"> </span>appropriate<span class="_ _d"> </span>to<span class="_ _d"> </span>answer<span class="_ _d"> </span>a<span class="_ _d"> </span>fo<span class="_ _3"></span>otnote<span class="_ _d"> </span>question<span class="_ _a"> </span>also<span class="_ _d"> </span>in</div><div class="t m0 xd h5 y95 ffa fs2 fc0 sc0 ls0 ws0">a<span class="_ _c"> </span>fo<span class="_ _3"></span>otnote,<span class="_ _4"> </span>even<span class="_ _c"> </span>though<span class="_ _c"> </span>we<span class="_ _c"> </span>consider<span class="_ _c"> </span>the<span class="_ _4"> </span>settlement<span class="_ _c"> </span>of<span class="_ _c"> </span>this<span class="_ _4"> </span>op<span class="_ _3"></span>en</div><div class="t m0 xd h5 y96 ffa fs2 fc0 sc0 ls0 ws0">problem<span class="_ _a"> </span>quite<span class="_ _a"> </span>noteworth<span class="_ _1"></span>y<span class="_ _1"></span>.</div><div class="t m0 x15 h6 y97 ff5 fs3 fc0 sc0 ls0 ws0">2</div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",61.539,683.596,null]'><div class="d m1" style="border-style:none;position:absolute;left:150.581699px;bottom:993.821895px;width:12.902000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",61.539,627.266,null]'><div class="d m1" style="border-style:none;position:absolute;left:183.424837px;bottom:993.821895px;width:12.902000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",316.583,605.43,null]'><div class="d m1" style="border-style:none;position:absolute;left:796.446078px;bottom:1126.656863px;width:7.447000px;height:8.863000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf2" data-dest-detail='[2,"XYZ",326.844,161.542,null]'><div class="d m1" style="border-style:none;position:absolute;left:582.936275px;bottom:1034.633987px;width:6.725000px;height:13.209000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",316.583,426.102,null]'><div class="d m1" style="border-style:none;position:absolute;left:683.740196px;bottom:883.125817px;width:7.448000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",66.521,163.326,null]'><div class="d m1" style="border-style:none;position:absolute;left:745.202614px;bottom:706.013072px;width:7.447000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",66.521,106.539,null]'><div class="d m1" style="border-style:none;position:absolute;left:714.297386px;bottom:639.594771px;width:7.447000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",316.583,426.102,null]'><div class="d m1" style="border-style:none;position:absolute;left:885.980392px;bottom:440.341503px;width:7.447000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",66.521,163.326,null]'><div class="d m1" style="border-style:none;position:absolute;left:661.003268px;bottom:418.202614px;width:7.447000px;height:8.862000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf2" data-dest-detail='[2,"XYZ",326.844,151.955,null]'><div class="d m1" style="border-style:none;position:absolute;left:551.246732px;bottom:392.598039px;width:6.724000px;height:13.208000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf5" data-dest-detail='[5,"XYZ",311.601,527.393,null]'><div class="d m1" style="border-style:none;position:absolute;left:818.612745px;bottom:241.166667px;width:42.453000px;height:11.580000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf5" data-dest-detail='[5,"XYZ",311.601,527.393,null]'><div class="d m1" style="border-style:none;position:absolute;left:663.472222px;bottom:227.854575px;width:43.030000px;height:10.140000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",316.583,426.102,null]'><div class="d m1" style="border-style:none;position:absolute;left:700.029412px;bottom:214.107843px;width:6.226000px;height:7.129000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.633987,0.000000,0.000000,1.633987,0.000000,0.000000]}'></div></div>
