<div id="pfa3" class="pf w0 h0" data-page-no="a3"><div class="pc pca3 w0 h0"><div class="t m0 xc h2 y12 ff1 fs0 fc0 sc0 ls0 ws0">8<span class="_ _a2"> </span>Runtime Study</div><div class="t m0 xed h11 y1b60 ffc fs7 fc0 sc0 ls0 ws0">“</div><div class="t me xe h9 y1b61 ff7 fs4 fc0 sc0 ls0 ws0">A<span class="_ _9"> </span>man<span class="_ _a"> </span>with<span class="_ _9"> </span>a<span class="_ _a"> </span>watch<span class="_ _9"> </span>knows<span class="_ _a"> </span>what<span class="_ _9"> </span>time<span class="_ _a"> </span>it<span class="_ _9"> </span>is.<span class="_ _0"> </span>A<span class="_ _a"> </span>man<span class="_ _9"> </span>with<span class="_ _a"> </span>two<span class="_ _9"> </span>watches</div><div class="t m0 x1e5 h9 y1b62 ff7 fs4 fc0 sc0 ls0 ws0">is<span class="_ _9"> </span>never<span class="_ _a"> </span>sure.<span class="_ _127"> </span>—<span class="_ _5"> </span><span class="ff5">S<span class="ff6">egal<span class="_ _3"></span><span class="ff5">’<span class="ff6">s<span class="_ _a"> </span></span>L<span class="ff6">a<span class="_ _20"></span>w</span></span></span></span></div><div class="t m0 x94 h11 y1b60 ffc fs7 fc0 sc0 ls0 ws0">”</div><div class="t m4 xc hd y1b63 ff5 fs4 fc0 sc0 ls0 ws0">Chapters<span class="_ _9"> </span><span class="ff6">4<span class="_ _a"> </span></span>and<span class="_ _9"> </span><span class="ff6">5<span class="_ _a"> </span></span>sho<span class="_ _b"></span>w<span class="_ _20"></span>ed<span class="_ _9"> </span>that<span class="_ _a"> </span>the<span class="_ _9"> </span>dual-piv<span class="_ _b"></span>ot<span class="_ _9"> </span>Quicksort<span class="_ _a"> </span>v<span class="_ _20"></span>ariants<span class="_ _a"> </span>sa<span class="_ _20"></span>v<span class="_ _20"></span>e<span class="_ _a"> </span>key compa-</div><div class="t m4 xc hd y1b64 ff5 fs4 fc0 sc0 ls0 ws0">risons,<span class="_ _9"> </span>but<span class="_ _a"> </span>need<span class="_ _9"> </span>more<span class="_ _9"> </span>swaps.<span class="_ _0"> </span>In<span class="_ _9"> </span>Chapter<span class="_ _a"> </span><span class="ff6">7</span>,<span class="_ _9"> </span>w<span class="_ _20"></span>e<span class="_ _a"> </span>determined<span class="_ _a"> </span>the<span class="_ _9"> </span>expected<span class="_ _a"> </span>number</div><div class="t m2 xc hd y1b65 ff5 fs4 fc0 sc0 ls0 ws0">of<span class="_ _a"> </span>primitiv<span class="_ _20"></span>e<span class="_ _a"> </span>instructions<span class="_ _a"> </span>perfor<span class="_ _6"></span>med<span class="_ _a"> </span>b<span class="_ _b"></span>y<span class="_ _a"> </span>implementations<span class="_ _a"> </span>of<span class="_ _a"> </span>the<span class="_ _4"> </span>algorithms<span class="_ _a"> </span>on</div><div class="t m6 xc hd y1b66 ff5 fs4 fc0 sc0 ls0 ws0">tw<span class="_ _20"></span>o<span class="_ _a"> </span>machines<span class="_ _5"> </span>—<span class="_ _5"> </span>with<span class="_ _a"> </span>the<span class="_ _4"> </span>result<span class="_ _9"> </span>that<span class="_ _4"> </span>on<span class="_ _a"> </span>those<span class="_ _a"> </span>machines,<span class="_ _a"> </span>sw<span class="_ _20"></span>aps<span class="_ _4"> </span>are<span class="_ _9"> </span>so<span class="_ _4"> </span>expensiv<span class="_ _3"></span>e</div><div class="t m0 xc hd y1b67 ff5 fs4 fc0 sc0 ls0 ws0">that<span class="_ _a"> </span>they<span class="_ _9"> </span>outw<span class="_ _20"></span>eigh<span class="_ _a"> </span>the<span class="_ _a"> </span>sa<span class="_ _b"></span>vings<span class="_ _a"> </span>in<span class="_ _a"> </span>comparisons.</div><div class="t m28 x26 hd y1b68 ff5 fs4 fc0 sc0 ls0 ws0">This<span class="_ _a"> </span>rises<span class="_ _a"> </span>the<span class="_ _a"> </span>question,<span class="_ _a"> </span>whether<span class="_ _a"> </span>dual-piv<span class="_ _b"></span>ot<span class="_ _a"> </span>Quicksort<span class="_ _a"> </span>is<span class="_ _a"> </span>competitiv<span class="_ _20"></span>e<span class="_ _a"> </span>on<span class="_ _a"> </span>real</div><div class="t m4 xc h9 y1b69 ff5 fs4 fc0 sc0 ls0 ws0">machines, if w<span class="_ _20"></span>e consider <span class="ff7">actual running<span class="_ _3c"> </span>time</span>.<span class="_ _17"> </span>After all, Y<span class="_ _33"></span><span class="ff6">arosla<span class="_ _1a"></span>vskiy<span class="ff5">’s dual-piv<span class="_ _20"></span>ot</span></span></div><div class="t m7 xc hd y1b6a ff5 fs4 fc0 sc0 ls0 ws0">Quicksort<span class="_ _a"> </span>w<span class="_ _20"></span>as<span class="_ _a"> </span>chosen<span class="_ _a"> </span>as<span class="_ _a"> </span>standard sorting<span class="_ _a"> </span>method<span class="_ _a"> </span>for<span class="_ _a"> </span>Oracle’s<span class="_ _a"> </span>Ja<span class="_ _20"></span>v<span class="_ _b"></span>a<span class="_ _a"> </span><span class="ff6">7<span class="_ _9"> </span></span>runtime</div><div class="t m0 xc hd y1b6b ff5 fs4 fc0 sc0 ls0 ws0">library<span class="_ _a"> </span>based<span class="_ _a"> </span>on<span class="_ _a"> </span>such<span class="_ _a"> </span>runtime<span class="_ _a"> </span>tests!</div><div class="t m12 x26 hd y1b6c ff5 fs4 fc0 sc0 ls0 ws0">Those<span class="_ _a"> </span>tests<span class="_ _9"> </span>w<span class="_ _b"></span>ere<span class="_ _a"> </span>based<span class="_ _9"> </span>on<span class="_ _a"> </span>an<span class="_ _a"> </span>optimized<span class="_ _a"> </span>implementation<span class="_ _a"> </span>intended<span class="_ _a"> </span>for<span class="_ _a"> </span>pro-</div><div class="t m2 xc hd y1b6d ff5 fs4 fc0 sc0 ls0 ws0">duction<span class="_ _a"> </span>use.<span class="_ _8"> </span>For<span class="_ _9"> </span>example,<span class="_ _4"> </span>the<span class="_ _a"> </span>original<span class="_ _4"> </span>code<span class="_ _a"> </span>in<span class="_ _a"> </span>the<span class="_ _a"> </span>runtime<span class="_ _4"> </span>library<span class="_ _4"> </span>selects<span class="_ _a"> </span>the</div><div class="t m24 xc h9 y1b6e ff7 fs4 fc0 sc0 ls0 ws0">tertiles<span class="_ _9"> </span>of<span class="_ _a"> </span>ﬁve<span class="_ _9"> </span>elements<span class="_ _a"> </span><span class="ff5">as<span class="_ _4"> </span>piv<span class="_ _3"></span>ots.<span class="_ _17"> </span>Such<span class="_ _a"> </span>additional<span class="_ _a"> </span>v<span class="_ _20"></span>ariations<span class="_ _a"> </span>might<span class="_ _4"> </span>ha<span class="_ _20"></span>v<span class="_ _20"></span>e<span class="_ _a"> </span>distorted</span></div><div class="t m2 xc hd y1b6f ff5 fs4 fc0 sc0 ls0 ws0">the<span class="_ _4"> </span>results<span class="_ _4"> </span>of<span class="_ _4"> </span>those<span class="_ _4"> </span>runtime<span class="_ _0"> </span>studies.<span class="_ _21"> </span>T<span class="_ _1a"></span>o<span class="_ _4"> </span>eliminate<span class="_ _0"> </span>such<span class="_ _4"> </span>secondary<span class="_ _4"> </span>inﬂuences,</div><div class="t m0 xc hd y1b70 ff5 fs4 fc0 sc0 ls0 ws0">this<span class="_ _a"> </span>chapter<span class="_ _a"> </span>presents<span class="_ _a"> </span>a<span class="_ _a"> </span>runtime<span class="_ _a"> </span>study<span class="_ _a"> </span>directly<span class="_ _9"> </span>based<span class="_ _a"> </span>on<span class="_ _4"> </span>Algorithms<span class="_ _9"> </span><span class="ff6">1</span>,<span class="_ _a"> </span><span class="ff6">8<span class="_ _a"> </span></span>and<span class="_ _a"> </span><span class="ff6">9</span>.</div><div class="t m2a x26 hd y1b71 ff5 fs4 fc0 sc0 ls0 ws0">The<span class="_ _a"> </span>particular<span class="_ _9"> </span>optimization<span class="_ _a"> </span>of<span class="_ _a"> </span>piv<span class="_ _20"></span>ot<span class="_ _a"> </span>sampling<span class="_ _a"> </span>is<span class="_ _a"> </span>inv<span class="_ _20"></span>estigated<span class="_ _a"> </span>in<span class="_ _a"> </span>Chapter<span class="_ _9"> </span><span class="ff6">9</span>.</div><div class="t m2 xc hd y1b72 ff5 fs4 fc0 sc0 ls0 ws0">There,<span class="_ _21"> </span>w<span class="_ _3"></span>e<span class="_ _8"> </span>will<span class="_ _8"> </span>sho<span class="_ _b"></span>w<span class="_ _8"> </span>that<span class="_ _8"> </span>in<span class="_ _8"> </span>terms<span class="_ _8"> </span>of<span class="_ _8"> </span>the<span class="_ _8"> </span>number<span class="_ _8"> </span>of<span class="_ _8"> </span>primitiv<span class="_ _3"></span>e<span class="_ _8"> </span>instructions,</div><div class="t m2 xc hd y1b73 ff5 fs4 fc0 sc0 ls0 ws0">selecting<span class="_ _4"> </span>the<span class="_ _a"> </span>tertiles<span class="_ _4"> </span>of<span class="_ _4"> </span>ﬁv<span class="_ _20"></span>e<span class="_ _4"> </span>elements<span class="_ _4"> </span>is<span class="_ _4"> </span>not<span class="_ _4"> </span>as<span class="_ _4"> </span>helpful<span class="_ _a"> </span>for<span class="_ _4"> </span>Algorithm<span class="_ _4"> </span><span class="ff6">8<span class="_ _4"> </span></span>as<span class="_ _4"> </span>one</div><div class="t m2 xc hd y1b74 ff5 fs4 fc0 sc0 ls0 ws0">might<span class="_ _8"> </span>think<span class="_ _8"> </span>at<span class="_ _21"> </span>ﬁrst<span class="_ _8"> </span>sight.<span class="_ _23"> </span>In<span class="_ _21"> </span>fact,<span class="_ _21"> </span>a<span class="_ _8"> </span>slight<span class="_ _8"> </span>variation<span class="_ _8"> </span>of<span class="_ _8"> </span>the<span class="_ _8"> </span>piv<span class="_ _20"></span>ot<span class="_ _21"> </span>sampling</div><div class="t m4 xc hd y1b75 ff5 fs4 fc0 sc0 ls0 ws0">scheme<span class="_ _9"> </span>impro<span class="_ _20"></span>v<span class="_ _b"></span>es<span class="_ _9"> </span>the<span class="_ _9"> </span>expected<span class="_ _a"> </span>number<span class="_ _9"> </span>of<span class="_ _a"> </span>instructions<span class="_ _9"> </span>b<span class="_ _b"></span>y<span class="_ _9"> </span>more<span class="_ _9"> </span>than<span class="_ _a"> </span><span class="ff6">3<span class="_ _5"> </span></span>%<span class="_ _9"> </span>without</div><div class="t m2 xc hd y1b76 ff5 fs4 fc0 sc0 ls0 ws0">any<span class="_ _0"> </span>additional<span class="_ _0"> </span>costs.<span class="_ _32"> </span>This<span class="_ _0"> </span>sho<span class="_ _b"></span>ws<span class="_ _0"> </span>that<span class="_ _0"> </span>one<span class="_ _0"> </span>can<span class="_ _0"> </span>v<span class="_ _20"></span>ery<span class="_ _0"> </span>easily<span class="_ _0"> </span>fall<span class="_ _0"> </span>for<span class="_ _0"> </span>premature</div><div class="t m25 xc hd y1b77 ff5 fs4 fc0 sc0 ls0 ws0">optimization<span class="_ _a"> </span>when<span class="_ _a"> </span>applying<span class="_ _a"> </span>v<span class="_ _b"></span>ariations<span class="_ _a"> </span>of<span class="_ _a"> </span>Quicksort.<span class="_ _17"> </span>This<span class="_ _a"> </span>is<span class="_ _a"> </span>another<span class="_ _a"> </span>important</div><div class="t m0 xc hd y1b78 ff5 fs4 fc0 sc0 ls0 ws0">reason<span class="_ _a"> </span>for<span class="_ _a"> </span>studying<span class="_ _a"> </span>the<span class="_ _a"> </span>runtime<span class="_ _a"> </span>of<span class="_ _a"> </span>the<span class="_ _a"> </span>basic<span class="_ _a"> </span>algorithms<span class="_ _a"> </span>in<span class="_ _a"> </span>isolation.</div><div class="t m0 xc h1a y1b79 ff1 fs5 fc0 sc0 ls0 ws0">8.1<span class="_ _15"> </span>Setup for the Experiments</div><div class="t m16 xc hd y1b7a ff5 fs4 fc0 sc0 ls0 ws0">Here<span class="_ _a"> </span>I<span class="_ _a"> </span>describe<span class="_ _a"> </span>as<span class="_ _a"> </span>brieﬂy<span class="_ _a"> </span>as<span class="_ _a"> </span>possible,<span class="_ _a"> </span>y<span class="_ _20"></span>et<span class="_ _a"> </span>hopefully<span class="_ _a"> </span>sufﬁciently<span class="_ _a"> </span>completely<span class="_ _33"></span>,<span class="_ _a"> </span>my</div><div class="t m0 xc hd y1b7b ff5 fs4 fc0 sc0 ls0 ws0">setup<span class="_ _a"> </span>for<span class="_ _a"> </span>the<span class="_ _a"> </span>runtime<span class="_ _a"> </span>study<span class="_ _33"></span>.</div><div class="t m0 x1ec hb y11 ff6 fs4 fc0 sc0 ls0 ws0">161</div><a class="l" href="#pf3f" data-dest-detail='[63,"XYZ",70.866,756.63,null]'><div class="d m1" style="border-style:none;position:absolute;left:117.374126px;bottom:935.789449px;width:62.853000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf6f" data-dest-detail='[111,"XYZ",70.866,756.63,null]'><div class="d m1" style="border-style:none;position:absolute;left:225.562596px;bottom:935.789449px;width:33.369000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf7d" data-dest-detail='[125,"XYZ",70.866,756.63,null]'><div class="d m1" style="border-style:none;position:absolute;left:426.741545px;bottom:907.111995px;width:57.437000px;height:15.003000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf20" data-dest-detail='[32,"XYZ",70.866,765.178,null]'><div class="d m1" style="border-style:none;position:absolute;left:659.907337px;bottom:562.436584px;width:77.926000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf41" data-dest-detail='[65,"XYZ",70.866,722.11,null]'><div class="d m1" style="border-style:none;position:absolute;left:787.468334px;bottom:562.436584px;width:15.475000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf70" data-dest-detail='[112,"XYZ",70.866,756.302,null]'><div class="d m1" style="border-style:none;position:absolute;left:816.448169px;bottom:562.436584px;width:34.164000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfaf" data-dest-detail='[175,"XYZ",70.866,756.63,null]'><div class="d m1" style="border-style:none;position:absolute;left:781.079701px;bottom:533.717133px;width:59.434000px;height:15.028000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf41" data-dest-detail='[65,"XYZ",70.866,722.11,null]'><div class="d m1" style="border-style:none;position:absolute;left:687.911154px;bottom:476.278231px;width:74.157000px;height:15.029000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.679893,0.000000,0.000000,1.679893,0.000000,0.000000]}'></div></div>
